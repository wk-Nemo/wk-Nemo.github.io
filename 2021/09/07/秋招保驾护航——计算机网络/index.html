<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="秋招保驾护航系列文章正在持续更新，往期文章如下，需者自取：  html、css：秋招保驾护航——HTML、CSS篇 js：秋招保驾护航——js面试篇（上）、秋招保驾护航——js面试篇（下） 浏览器：秋招保驾护航——浏览器篇  传输层传输层位于应用层和网络层中间，在因特网协议中，我们关注TCP和UDP协议。先来了解一下传输层提供的服务：  传输层协议为运行在不同进程之间提供了逻辑通信。  应用进程通">
<meta property="og:type" content="article">
<meta property="og:title" content="秋招保驾护航——计算机网络">
<meta property="og:url" content="http://example.com/2021/09/07/%E7%A7%8B%E6%8B%9B%E4%BF%9D%E9%A9%BE%E6%8A%A4%E8%88%AA%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/index.html">
<meta property="og:site_name" content="wk的博客">
<meta property="og:description" content="秋招保驾护航系列文章正在持续更新，往期文章如下，需者自取：  html、css：秋招保驾护航——HTML、CSS篇 js：秋招保驾护航——js面试篇（上）、秋招保驾护航——js面试篇（下） 浏览器：秋招保驾护航——浏览器篇  传输层传输层位于应用层和网络层中间，在因特网协议中，我们关注TCP和UDP协议。先来了解一下传输层提供的服务：  传输层协议为运行在不同进程之间提供了逻辑通信。  应用进程通">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7af85487b5a542449d36e2cef0fa298c~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f859a2fe0a740c59f7404cc3f67ca08~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64fbc8dbcd6e4e168a0187fc209284dc~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7968ef1a3fe4ff985103c590142ab50~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec654d5571084e7291451a955c1ee5c5~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/886407ca5efc4928a5a3cde63a201995~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b79ba593c05645debd68dd084e3b0640~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebbb1c14d23b46569bead54a5b7f7e11~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5ba8247200343239413d581242ce982~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bbd5c8b00214fa3967f0c3c32ce1868~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf4548d75bf041b59242815ac63b109a~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/584b950beeeb4955892c67312ee35840~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1992b2f6fc3148eeb7cf1885e9d39c5a~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6809eabbeb6d43ca8f08d9ebf418a459~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/424e4a94a5c94b5c904960788e273287~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5acdcf6db3bb49a7a395797def8d0524~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7ab00ebb9f5444aaf5e4e6c94fce533~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/701ab7bf3e0f46868939c22d7d2a626b~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf269def9d514f49aedf18ca373201fd~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e63a006004a4255968ddfa7c871eb7b~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f87fca32b2164ea097c7e235bc6a7819~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b5e15b723a1417fbe880738e9abad53~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36a0f4f6bbd842949075b30307877ff9~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="og:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba5ebdddac8a4d79887bb2f968478381~tplv-k3u1fbpfcp-zoom-1.image">
<meta property="article:published_time" content="2021-09-07T01:22:04.000Z">
<meta property="article:modified_time" content="2023-05-07T09:43:30.774Z">
<meta property="article:author" content="wk">
<meta property="article:tag" content="面试">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7af85487b5a542449d36e2cef0fa298c~tplv-k3u1fbpfcp-zoom-1.image">


<link rel="canonical" href="http://example.com/2021/09/07/%E7%A7%8B%E6%8B%9B%E4%BF%9D%E9%A9%BE%E6%8A%A4%E8%88%AA%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"en","comments":true,"permalink":"http://example.com/2021/09/07/%E7%A7%8B%E6%8B%9B%E4%BF%9D%E9%A9%BE%E6%8A%A4%E8%88%AA%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/","path":"2021/09/07/秋招保驾护航——计算机网络/","title":"秋招保驾护航——计算机网络"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>秋招保驾护航——计算机网络 | wk的博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">wk的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录技术、学习和生活的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E8%BE%93%E5%B1%82"><span class="nav-number">1.</span> <span class="nav-text">传输层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-TCP%E5%92%8CUDP%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">2.</span> <span class="nav-text">1. TCP和UDP的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-TCP%E8%BF%9E%E6%8E%A5%E7%9A%84%E4%B8%89%E6%AC%A1%E6%8F%A1%E6%89%8B"><span class="nav-number">3.</span> <span class="nav-text">2. TCP连接的三次握手</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-TCP%E5%9B%9B%E6%AC%A1%E6%8C%A5%E6%89%8B"><span class="nav-number">4.</span> <span class="nav-text">3. TCP四次挥手</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-TCP%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93%E5%8E%9F%E7%90%86"><span class="nav-number">5.</span> <span class="nav-text">4. TCP可靠数据传输原理</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89-rdt1-0-%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.0.1.</span> <span class="nav-text">（1） rdt1.0 协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%882%EF%BC%89-rdt2-0-%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.0.2.</span> <span class="nav-text">（2） rdt2.0 协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%883%EF%BC%89-rdt2-1-%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.0.3.</span> <span class="nav-text">（3） rdt2.1 协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%884%EF%BC%89rdt-3-0"><span class="nav-number">5.0.4.</span> <span class="nav-text">（4）rdt 3.0</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%885%EF%BC%89%E6%B5%81%E6%B0%B4%E7%BA%BF"><span class="nav-number">5.0.5.</span> <span class="nav-text">（5）流水线</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%886%EF%BC%89%E5%9B%9E%E9%80%80N%E6%AD%A5%E5%8D%8F%E8%AE%AE"><span class="nav-number">5.0.6.</span> <span class="nav-text">（6）回退N步协议</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%888%EF%BC%89%E9%80%89%E6%8B%A9%E9%87%8D%E4%BC%A0%E5%8D%8F%E8%AE%AE%EF%BC%88SR%EF%BC%89"><span class="nav-number">5.0.7.</span> <span class="nav-text">（8）选择重传协议（SR）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%888%EF%BC%89TCP%E4%B8%AD%E7%9A%84%E5%8F%AF%E9%9D%A0%E6%95%B0%E6%8D%AE%E4%BC%A0%E8%BE%93"><span class="nav-number">5.0.8.</span> <span class="nav-text">（8）TCP中的可靠数据传输</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-TCP%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6"><span class="nav-number">6.</span> <span class="nav-text">5. TCP流量控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%91%E9%80%81%E7%AA%97%E5%8F%A3"><span class="nav-number">6.0.1.</span> <span class="nav-text">发送窗口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8E%A5%E6%94%B6%E7%AA%97%E5%8F%A3"><span class="nav-number">6.0.2.</span> <span class="nav-text">接收窗口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B5%81%E9%87%8F%E6%8E%A7%E5%88%B6%E8%BF%87%E7%A8%8B"><span class="nav-number">6.0.3.</span> <span class="nav-text">流量控制过程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-TCP%E6%8B%A5%E5%A1%9E%E6%8E%A7%E5%88%B6"><span class="nav-number">7.</span> <span class="nav-text">6. TCP拥塞控制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E7%AA%97%E5%8F%A3"><span class="nav-number">7.0.1.</span> <span class="nav-text">拥塞窗口</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%85%A2%E5%90%AF%E5%8A%A8"><span class="nav-number">7.0.2.</span> <span class="nav-text">慢启动</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8B%A5%E5%A1%9E%E9%81%BF%E5%85%8D"><span class="nav-number">7.1.</span> <span class="nav-text">拥塞避免</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E9%87%8D%E4%BC%A0"><span class="nav-number">7.1.1.</span> <span class="nav-text">快速重传</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E6%80%A7%E9%87%8D%E4%BC%A0"><span class="nav-number">7.1.2.</span> <span class="nav-text">选择性重传</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E6%81%A2%E5%A4%8D"><span class="nav-number">7.1.3.</span> <span class="nav-text">快速恢复</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E5%B1%82"><span class="nav-number">8.</span> <span class="nav-text">应用层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-HTTP%E6%8A%A5%E6%96%87%E6%A0%BC%E5%BC%8F"><span class="nav-number">9.</span> <span class="nav-text">1. HTTP报文格式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-HTTP%E8%AF%B7%E6%B1%82%E6%8A%A5%E6%96%87"><span class="nav-number">9.0.1.</span> <span class="nav-text">(1)HTTP请求报文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#2-HTTP%E5%93%8D%E5%BA%94%E6%8A%A5%E6%96%87"><span class="nav-number">9.0.2.</span> <span class="nav-text">2.HTTP响应报文</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#3-%E9%A6%96%E9%83%A8%E5%AD%97%E6%AE%B5"><span class="nav-number">9.0.3.</span> <span class="nav-text">3.首部字段</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-get%E5%92%8Cpost%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">10.</span> <span class="nav-text">2. get和post的区别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E5%92%8C%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5"><span class="nav-number">11.</span> <span class="nav-text">3. 持续连接和非持续连接</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%EF%BC%881%EF%BC%89%E9%9D%9E%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E7%9A%84HTTP"><span class="nav-number">11.0.1.</span> <span class="nav-text">（1）非持续连接的HTTP</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%EF%BC%882%EF%BC%89%E6%8C%81%E7%BB%AD%E8%BF%9E%E6%8E%A5%E7%9A%84HTTP"><span class="nav-number">11.1.</span> <span class="nav-text">（2）持续连接的HTTP</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%AE%A1%E7%BA%BF%E5%8C%96"><span class="nav-number">11.1.0.1.</span> <span class="nav-text">管线化</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%A4%9A%E8%B7%AF%E5%A4%8D%E7%94%A8"><span class="nav-number">11.1.0.2.</span> <span class="nav-text">多路复用</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-http%E5%90%84%E7%89%88%E6%9C%AC%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">12.</span> <span class="nav-text">4. http各版本的区别</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="wk"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">wk</p>
  <div class="site-description" itemprop="description">一个前端程序员</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wk-Nemo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wk-Nemo" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://juejin.cn/user/3122268755465879" title="掘金 → https:&#x2F;&#x2F;juejin.cn&#x2F;user&#x2F;3122268755465879" rel="noopener me" target="_blank">掘金</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="en">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/07/%E7%A7%8B%E6%8B%9B%E4%BF%9D%E9%A9%BE%E6%8A%A4%E8%88%AA%E2%80%94%E2%80%94%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="秋招保驾护航——计算机网络 | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          秋招保驾护航——计算机网络
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-09-07 09:22:04" itemprop="dateCreated datePublished" datetime="2021-09-07T09:22:04+08:00">2021-09-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:43:30" itemprop="dateModified" datetime="2023-05-07T17:43:30+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">计算机基础</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/" itemprop="url" rel="index"><span itemprop="name">计算机网络</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody"><p>秋招保驾护航系列文章正在持续更新，往期文章如下，需者自取：</p>
<ul>
<li>html、css：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6998576161382989861">秋招保驾护航——HTML、CSS篇</a></li>
<li>js：<a target="_blank" rel="noopener" href="https://juejin.cn/post/6987776819281805342/" title="https://juejin.cn/post/6987776819281805342/">秋招保驾护航——js面试篇（上）</a>、<a target="_blank" rel="noopener" href="https://juejin.cn/post/6988515657105047559" title="https://juejin.cn/post/6988515657105047559">秋招保驾护航——js面试篇（下）</a></li>
<li>浏览器：<a target="_blank" rel="noopener" href="http://blog.wutortoise.cn/2021/08/10/%E7%A7%8B%E6%8B%9B%E4%BF%9D%E9%A9%BE%E6%8A%A4%E8%88%AA%E2%80%94%E2%80%94%E2%80%94%E6%B5%8F%E8%A7%88%E5%99%A8%E7%AF%87">秋招保驾护航——浏览器篇</a></li>
</ul>
<h2 id="传输层"><a href="#传输层" class="headerlink" title="传输层"></a>传输层</h2><p>传输层位于应用层和网络层中间，在因特网协议中，我们关注TCP和UDP协议。先来了解一下传输层提供的服务：</p>
<ul>
<li><p>传输层协议为运行在不同<strong>进程</strong>之间提供了<strong>逻辑通信</strong>。</p>
</li>
<li><p><strong>应用进程</strong>通过使用传输层提供的逻辑通信功能<strong>彼此发送报文</strong>，无需考虑承载这些报文的物理基础设施的细节</p>
</li>
<li><p>传输层协议是在端系统实现的：</p>
<ul>
<li>发送端，运输层将从应用进程接收到的报文转换为<strong>报文段</strong></li>
<li>为每个报文段加上一个<strong>运输层首部</strong>，生成一个<strong>运输层报文段</strong></li>
<li>传递这些报文段给网络层</li>
<li>网络层将其封装成数据包向目的地发送</li>
<li>在接收端，网络层从数据包中提取<strong>运输层报文段</strong>，并将其提交给上层运输层</li>
<li>运输层处理接收到的报文段</li>
<li>将报文段中的数据为接受应用进程使用</li>
</ul>
</li>
</ul>
<p><strong>UPD和TCP提供的服务模型</strong></p>
<ul>
<li>运输层的<strong>多路复用</strong>和<strong>多路分解</strong></li>
<li>提供完整性检查</li>
</ul>
<p><strong>TCP额外提供的服务</strong></p>
<ul>
<li>可靠数据传输服务</li>
<li>拥塞控制</li>
</ul>
<h2 id="1-TCP和UDP的区别"><a href="#1-TCP和UDP的区别" class="headerlink" title="1. TCP和UDP的区别"></a>1. TCP和UDP的区别</h2><p><strong>TCP是一个面向连接的、可靠的、基于字节流的传输层协议。而UDP是一个面向无连接的传输层协议。</strong></p>
<p>（1）面向连接服务</p>
<ul>
<li>面向连接服务：在进行报文流动前，TCP让客户和服务器互相进行交换运输层控制信息。</li>
<li>这个所谓的握手过程提醒客户和服务器，让他们为大量的分组的到来做好准备</li>
<li>一个TCP连接在两个进程的套接字之间建立后，双方可以在此连接上进行报文收发</li>
<li>当报文放松结束时，必须拆除该连接。</li>
</ul>
<p>（2）可靠数据传送服务</p>
<ul>
<li>通信进程之间依靠TCP能够无差错、按适当顺序交付所有的数据</li>
</ul>
<p>（3）面向字节流</p>
<ul>
<li>UDP 的数据传输是基于数据报的，这是因为仅仅只是继承了 IP 层的特性，而 TCP 为了维护状态，将一个个 IP 包变成了字节流。</li>
</ul>
<h2 id="2-TCP连接的三次握手"><a href="#2-TCP连接的三次握手" class="headerlink" title="2. TCP连接的三次握手"></a>2. TCP连接的三次握手</h2><ul>
<li><p>客户端发送SYN，表明要向服务器建立连接。同时带上序列号ISN</p>
</li>
<li><p>服务器返回ACK（序号为客户端序列号+1）作为确认。同时发送SYN作为应答（SYN的序列号为服务端唯一的序号）</p>
</li>
<li><p>客户端发送ACK确认收到回复（序列号为服务端序列号+1）</p>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/e003c015ced1eaf0dc112b7f4a4ac2b8257c4df2fcdb169ab700be70f6931c2b/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f35323461316561303134363634336361616331643836386439366439383135627e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7af85487b5a542449d36e2cef0fa298c~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></a></p>
</li>
</ul>
<blockquote>
<p>1、为什么是是三次握手不是两次或四次？</p>
<p>因为，tcp连接是全双工的，数据在两个方向上能同时传递。所以要确保双方，同时能发数据和收数据</p>
<ul>
<li>第一次握手：证明了发送方能发数据</li>
<li>第二次握手：ack确保了接收方能收数据，syn确保了接收方能发数据</li>
<li>第三次握手：确保了发送方能收数据</li>
<li>四次握手浪费，两次握手不能保证“双方同时具备收发功能”</li>
</ul>
<p>2、为什么客户端最后还要发送一次确认？<br>主要是为了防止已失效的连接请求报文段突然又传到了 服务器，因而产生错误。</p>
</blockquote>
<h2 id="3-TCP四次挥手"><a href="#3-TCP四次挥手" class="headerlink" title="3. TCP四次挥手"></a>3. TCP四次挥手</h2><ul>
<li><p>主动关闭的一方发送FIN，表示要单方面关闭数据的传输</p>
</li>
<li><p>服务端收到FIN后，发送一个ACK作为确认（序列号为收到的序列号+1）</p>
</li>
<li><p>等服务器数据传输完毕，也发送一个FIN标识，表示关闭这个方向的数据传输</p>
</li>
<li><p>客户端回复ACK以确认回复</p>
<p><a target="_blank" rel="noopener" href="https://camo.githubusercontent.com/c102c814cc3e7cba5c3ba03e29f9389d4cb4aa9f959575fed762d288dbc49869/68747470733a2f2f70332d6a75656a696e2e62797465696d672e636f6d2f746f732d636e2d692d6b3375316662706663702f62636434306238653364663134643334396566393665343664306662396462307e74706c762d6b3375316662706663702d7a6f6f6d2d312e696d616765"><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4f859a2fe0a740c59f7404cc3f67ca08~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></a></p>
</li>
</ul>
<blockquote>
<p>1、为什么挥手是四次而握手是三次？<br>TCP释放连接时之所以需要“四次挥手”,是因为FIN释放连接报文与ACK确认接收报文是分别由第二次和第三次”握手”传输的。为何建立连接时一起传输，释放连接时却要分开传输？</p>
<ul>
<li>建立连接时，被动方服务器端结束CLOSED阶段进入“握手”阶段并不需要任何准备，可以直接返回SYN和ACK报文，开始建立连接。</li>
<li>释放连接时，被动方服务器，突然收到主动方客户端释放连接的请求时并不能立即释放连接，因为还有必要的数据需要处理，所以服务器先返回ACK确认收到报文，经过CLOSE-WAIT阶段准备好释放连接之后，才能返回FIN释放连接报文。</li>
</ul>
</blockquote>
<h2 id="4-TCP可靠数据传输原理"><a href="#4-TCP可靠数据传输原理" class="headerlink" title="4. TCP可靠数据传输原理"></a>4. TCP可靠数据传输原理</h2><h4 id="（1）-rdt1-0-协议"><a href="#（1）-rdt1-0-协议" class="headerlink" title="（1） rdt1.0 协议"></a>（1） rdt1.0 协议</h4><p>首先考虑最简单的情况，底层通信道是完全可靠的<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/64fbc8dbcd6e4e168a0187fc209284dc~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<ul>
<li><p>发送方</p>
<ul>
<li>rdt_send(data)：接收来自较高层的数据</li>
<li>make_pkt(data)：产生一个包含该数据的分组</li>
<li>将分组（packet）发送到信道中</li>
</ul>
</li>
<li><p>接收端</p>
<ul>
<li>rdt_rcv：从底层信道接受一个分组</li>
<li>extract(packet, data)：从分组中取出数据</li>
<li>deliver_data(data)：将数据传给较高层</li>
</ul>
</li>
</ul>
<h4 id="（2）-rdt2-0-协议"><a href="#（2）-rdt2-0-协议" class="headerlink" title="（2） rdt2.0 协议"></a>（2） rdt2.0 协议</h4><p>第一种协议是在认为数据完全可靠下的情况，但是在实际模型中是分组中的比特可能受损的模型。<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f7968ef1a3fe4ff985103c590142ab50~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<ul>
<li><p>发送方</p>
<ul>
<li><p>状态1：</p>
<ul>
<li>发送端协议等待来自上层传输下来的数据</li>
<li>rdt_send(data)：接收来自较高层的数据，带有检验和</li>
<li>make_pkt(data)：产生一个包含该数据的分组</li>
<li>udt_send(sndpkt)：发送该分组</li>
</ul>
</li>
<li><p>状态2：</p>
<ul>
<li>等待来自接收方的ACK或NAK分组</li>
<li>rdt_rcv(rcvpkt) &amp;&amp; isACK(rcvpkt)：表示接收方已经正确接收分组，状态转换成等待上层调用</li>
<li>rdt_rcv(rcvpkt) &amp;&amp;isNAK(rcvpkt)：表示上一个分组接收方的响应是重传，重新上传一遍分组并且等待和接收方回送的ACK和NAK</li>
</ul>
</li>
</ul>
</li>
<li><p>接收方</p>
<ul>
<li>分组没有受损，返回ACK</li>
<li>分组受损，返回NAK</li>
</ul>
</li>
</ul>
<h4 id="（3）-rdt2-1-协议"><a href="#（3）-rdt2-1-协议" class="headerlink" title="（3） rdt2.1 协议"></a>（3） rdt2.1 协议</h4><p>rdt2.0看似可以运行，但是有一个致命的缺陷，没有考虑到ACK或NAK受损的可能性。因此在rdt2.0基础上引入了序号。</p>
<p>发送方<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ec654d5571084e7291451a955c1ee5c5~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"><br>接收方<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/886407ca5efc4928a5a3cde63a201995~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<h4 id="（4）rdt-3-0"><a href="#（4）rdt-3-0" class="headerlink" title="（4）rdt 3.0"></a>（4）rdt 3.0</h4><p>除了比特受损外，我们再考虑计算机网络中出现的底层信道丢包的情况。</p>
<p>设置一个倒技术定时器</p>
<ul>
<li>每次发送一个分组时便启动一个定时器</li>
<li>响应定时器中断</li>
<li>终止定时器</li>
</ul>
<h4 id="（5）流水线"><a href="#（5）流水线" class="headerlink" title="（5）流水线"></a>（5）流水线</h4><p>rdt3.0是一个功能正确的传输协议，但是他的<strong>停等协议</strong>（等待接收方返回的ACK后才能进入等待上层调用的状态）的特殊性能也造成了效率较低的问题。</p>
<p>解决办法：不以停等的方式运行，允许发送方发送多个分组，无需等待确认。这种技术称为<strong>流水线</strong>。<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b79ba593c05645debd68dd084e3b0640~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<p>流水线带来的影响：</p>
<ul>
<li>必须增加序号范围，因为每个分组必须有唯一的标识符</li>
<li>协议的发送发和接收方必须缓存多个分组</li>
<li>所需序号范围对缓冲的要求取决于数据传输协议如何处理丢失、损坏以及延时过大的分组。解决流水线差错恢复的两种基本方法是：<strong>回退N步</strong>（GBN）和<strong>选择重传</strong>（SR）</li>
</ul>
<h4 id="（6）回退N步协议"><a href="#（6）回退N步协议" class="headerlink" title="（6）回退N步协议"></a>（6）回退N步协议</h4><p>回退N步协议（GBN协议，滑动窗口协议）：允许发送发发送多个分组不需要等待确认，但是未确认的分组数不能超过某个最大值N。</p>
<p>设置N的原因：流量控制、拥塞控制</p>
<p>GBK协议响应的三种事件：</p>
<ul>
<li><p>发送方：</p>
<ul>
<li><p>当上层调用时</p>
<ul>
<li>窗口已满，告诉发送方等待一会</li>
<li>窗口未满，产生一个分组并传送</li>
</ul>
</li>
<li><p>收到一个ACK</p>
<ul>
<li>窗口向右滑动</li>
</ul>
</li>
<li><p>超时事件</p>
<ul>
<li>如果收到一个ACK，但是前面的分组未被确认，重启定时器</li>
</ul>
</li>
</ul>
</li>
<li><p>接收方：</p>
<ul>
<li>序号为n的分组被正确接收到，并且按序，为n发一个ACK</li>
<li>其它所有情况，接收方丢弃该分组，并选择最近序列的分组重新发ACK</li>
</ul>
</li>
</ul>
<h4 id="（8）选择重传协议（SR）"><a href="#（8）选择重传协议（SR）" class="headerlink" title="（8）选择重传协议（SR）"></a>（8）选择重传协议（SR）</h4><p>滑动窗口协议潜为了保证分组的正确顺序，对数据进行重传，但是考虑到窗口长度和带宽较大的情况，就会造成重复传递带来的效率问题。</p>
<p>选择重传：让发送发仅重传那些让它怀疑在接收方出错的分组，避免了不必要的重传。</p>
<h4 id="（8）TCP中的可靠数据传输"><a href="#（8）TCP中的可靠数据传输" class="headerlink" title="（8）TCP中的可靠数据传输"></a>（8）TCP中的可靠数据传输</h4><p>因特网的网络层服务（IP服务）是不可靠的，即不保证数据交付、不保证数据包按序交付、不保证数据包的完整。TCP在IP不可靠尽力而为的服务至上创建了<strong>可靠数据传输服务</strong>，确保了数据传输到另一端的是无损坏、无间隙、非冗余且按序交付的。</p>
<p>我们将根据前面的原理来解释TCP如何实现可靠数据传输的：</p>
<ol>
<li>如果来自下层的数据完全可靠，根据rdt1.0那么TCP协议只需要进行数据的传输即可。</li>
<li>但是很可惜，网络传输过程中往往有比特的损失，于是根据rdt2.0，加上了校验和确保了数据的正确性</li>
<li>看似上述协议已经完美，但是网络运输中还存在丢包的问题，根据rdt3.0，引入了计时器，当一个分组隔一段时间没有发过来，便重发一遍报文并重启计时器</li>
<li>但是计时器还存在一个问题，如果响应报文只是延迟传过来，怎么与其他报文进行区分呢？于是引入了序号。这样接收方就可以根据数据的字节编号，得出这些数据是接下来的数据，还是重传的数据。</li>
<li>根据rdt一些列的协议解决了可靠传输的问题，但是这是一种停等协议，就是说在传输的过程中，若未接收到报文的响应，上层应用就要一直等待，这样的工作效率太低。于是引入流水线的工作方式，运行多个报文发送，不用去等待响应报文后再继续发送。</li>
<li>网络中充斥着和发送数据包一样数据量的确认回复报文，因为每一个发送数据包，必须得有一个确认回复。提高网络效率的方法是：累积确认 。接收方不需要逐个进行回复，而是累积到一定量的数据包之后，告诉发送方，在此数据包之前的数据全都收到。例如，收到 1234，接收方只需要告诉发送方我收到4了，那么发送方就知道1234都收到了。</li>
<li>累计确认提高了网络效率，但是出现丢包的话采用的是GBN方法，即将从丢包的那个报文开始全部重传，这样做虽然保证了报文的有序性，但是一旦带框和流量大的话就会造成严重的资源浪费。所以在TCP报文的选项字段，可以设置已经收到的报文段，每一个报文段需要两个边界来进行确定。这样发送方，就可以根据这个选项字段只重传丢失的数据了。这种方法看起来很像SR协议，所以我们说TCP协议的可靠数据传输的差错恢复机制是GBN协议和SR协议的混合体。</li>
<li>发送是否可以无限发送直到把缓冲区所有数据发送完？不可以。因为需要考虑接收方缓冲区以及读取数据的能力。如果发送太快导致接收方无法接受，那么只是会频繁进行重传，浪费了网络资源。所以发送方发送数据的范围，需要考虑到接收方缓冲区的情况。这就是TCP的流量控制 。解决方法是：滑动窗口 。</li>
</ol>
<h2 id="5-TCP流量控制"><a href="#5-TCP流量控制" class="headerlink" title="5. TCP流量控制"></a>5. TCP流量控制</h2><p>对于发送端和接收端而言，TCP 需要把发送的数据放到<strong>发送缓存区</strong>, 将接收的数据放到<strong>接收缓存区</strong>。而<strong>流量控制</strong>要做的事情，就是在通过接收缓存区的大小，控制发送端的发送。如果对方的接收缓存区满了，就不能再继续发送了。</p>
<p>要具体理解流量控制，首先需要了解<code>滑动窗口</code>的概念。</p>
<p>TCP 滑动窗口分为两种: <strong>发送窗口</strong>和<strong>接收窗口</strong>。</p>
<h4 id="发送窗口"><a href="#发送窗口" class="headerlink" title="发送窗口"></a>发送窗口</h4><p>发送端的滑动窗口结构如下:</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ebbb1c14d23b46569bead54a5b7f7e11~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>其中包含四大部分:</p>
<ul>
<li>已发送且已确认</li>
<li>已发送但未确认</li>
<li>未发送但可以发送</li>
<li>未发送也不可以发送</li>
</ul>
<p>其中有一些重要的概念，我标注在图中:</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/b5ba8247200343239413d581242ce982~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>发送窗口就是图中被框住的范围。SND 即<code>send</code>, WND 即<code>window</code>, UNA 即<code>unacknowledged</code>, 表示未被确认，NXT 即<code>next</code>, 表示下一个发送的位置。</p>
<h4 id="接收窗口"><a href="#接收窗口" class="headerlink" title="接收窗口"></a>接收窗口</h4><p>接收端的窗口结构如下:</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7bbd5c8b00214fa3967f0c3c32ce1868~tplv-k3u1fbpfcp-zoom-1.image"></p>
<p>REV 即 <code>receive</code>，NXT 表示下一个接收的位置，WND 表示接收窗口大小。</p>
<h4 id="流量控制过程"><a href="#流量控制过程" class="headerlink" title="流量控制过程"></a>流量控制过程</h4><h2 id="6-TCP拥塞控制"><a href="#6-TCP拥塞控制" class="headerlink" title="6. TCP拥塞控制"></a>6. TCP拥塞控制</h2><p>上一节所说的<strong>流量控制</strong>发生在发送端跟接收端之间，并没有考虑到整个网络环境的影响，如果说当前网络特别差，特别容易丢包，那么发送端就应该注意一些了。而这，也正是<code>拥塞控制</code>需要处理的问题。</p>
<p>对于拥塞控制来说，TCP 每条连接都需要维护两个核心状态:</p>
<ul>
<li>拥塞窗口（Congestion Window，cwnd）</li>
<li>慢启动阈值（Slow Start Threshold，ssthresh）</li>
</ul>
<p>涉及到的算法有这几个:</p>
<ul>
<li>慢启动</li>
<li>拥塞避免</li>
<li>快速重传和快速恢复</li>
</ul>
<p>接下来，我们就来一一拆解这些状态和算法。首先，从拥塞窗口说起。</p>
<h4 id="拥塞窗口"><a href="#拥塞窗口" class="headerlink" title="拥塞窗口"></a>拥塞窗口</h4><p>拥塞窗口（Congestion Window，cwnd）是指目前自己还能传输的数据量大小。</p>
<p>那么之前介绍了接收窗口的概念，两者有什么区别呢？</p>
<ul>
<li>接收窗口(rwnd)是<code>接收端</code>给的限制</li>
<li>拥塞窗口(cwnd)是<code>发送端</code>的限制</li>
</ul>
<p>限制谁呢？</p>
<p>限制的是<code>发送窗口</code>的大小。</p>
<p>有了这两个窗口，如何来计算<code>发送窗口</code>？</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">发送窗口大小 = min(rwnd, cwnd)</span><br></pre></td></tr></table></figure>

<p>取两者的较小值。而拥塞控制，就是来控制<code>cwnd</code>的变化。</p>
<h4 id="慢启动"><a href="#慢启动" class="headerlink" title="慢启动"></a>慢启动</h4><p>刚开始进入传输数据的时候，你是不知道现在的网路到底是稳定还是拥堵的，如果做的太激进，发包太急，那么疯狂丢包，造成雪崩式的网络灾难。</p>
<p>因此，拥塞控制首先就是要采用一种保守的算法来慢慢地适应整个网路，这种算法叫<code>慢启动</code>。运作过程如下:</p>
<ul>
<li>首先，三次握手，双方宣告自己的接收窗口大小</li>
<li>双方初始化自己的<strong>拥塞窗口</strong>(cwnd)大小</li>
<li>在开始传输的一段时间，发送端每收到一个 ACK，拥塞窗口大小加 1，也就是说，每经过一个 RTT，cwnd 翻倍。如果说初始窗口为 10，那么第一轮 10 个报文传完且发送端收到 ACK 后，cwnd 变为 20，第二轮变为 40，第三轮变为 80，依次类推。</li>
</ul>
<p>难道就这么无止境地翻倍下去？当然不可能。它的阈值叫做<strong>慢启动阈值</strong>，当 cwnd 到达这个阈值之后，好比踩了下刹车，别涨了那么快了，老铁，先 hold 住！</p>
<p>在到达阈值后，如何来控制 cwnd 的大小呢？</p>
<p>这就是拥塞避免做的事情了。</p>
<h3 id="拥塞避免"><a href="#拥塞避免" class="headerlink" title="拥塞避免"></a>拥塞避免</h3><p>原来每收到一个 ACK，cwnd 加1，现在到达阈值了，cwnd 只能加这么一点: <strong>1 &#x2F; cwnd</strong>。那你仔细算算，一轮 RTT 下来，收到 cwnd 个 ACK, 那最后拥塞窗口的大小 cwnd 总共才增加 1。</p>
<p>也就是说，以前一个 RTT 下来，<code>cwnd</code>翻倍，现在<code>cwnd</code>只是增加 1 而已。</p>
<p>当然，<strong>慢启动</strong>和<strong>拥塞避免</strong>是一起作用的，是一体的。</p>
<h4 id="快速重传"><a href="#快速重传" class="headerlink" title="快速重传"></a>快速重传</h4><p>在 TCP 传输的过程中，如果发生了丢包，即接收端发现数据段不是按序到达的时候，接收端的处理是重复发送之前的 ACK。</p>
<p>比如第 5 个包丢了，即使第 6、7 个包到达的接收端，接收端也一律返回第 4 个包的 ACK。当发送端收到 3 个重复的 ACK 时，意识到丢包了，于是马上进行重传，不用等到一个 RTO 的时间到了才重传。</p>
<p>这就是<strong>快速重传</strong>，它解决的是<strong>是否需要重传</strong>的问题。</p>
<h4 id="选择性重传"><a href="#选择性重传" class="headerlink" title="选择性重传"></a>选择性重传</h4><p>那你可能会问了，既然要重传，那么只重传第 5 个包还是第5、6、7 个包都重传呢？</p>
<p>当然第 6、7 个都已经到达了，TCP 的设计者也不傻，已经传过去干嘛还要传？干脆记录一下哪些包到了，哪些没到，针对性地重传。</p>
<p>在收到发送端的报文后，接收端回复一个 ACK 报文，那么在这个报文首部的可选项中，就可以加上<code>SACK</code>这个属性，通过<code>left edge</code>和<code>right edge</code>告知发送端已经收到了哪些区间的数据报。因此，即使第 5 个包丢包了，当收到第 6、7 个包之后，接收端依然会告诉发送端，这两个包到了。剩下第 5 个包没到，就重传这个包。这个过程也叫做<strong>选择性重传(SACK，Selective Acknowledgment)</strong> ，它解决的是<strong>如何重传</strong>的问题。</p>
<h4 id="快速恢复"><a href="#快速恢复" class="headerlink" title="快速恢复"></a>快速恢复</h4><p>当然，发送端收到三次重复 ACK 之后，发现丢包，觉得现在的网络已经有些拥塞了，自己会进入<strong>快速恢复</strong>阶段。</p>
<p>在这个阶段，发送端如下改变：</p>
<ul>
<li>拥塞阈值降低为 cwnd 的一半</li>
<li>cwnd 的大小变为拥塞阈值</li>
<li>cwnd 线性增加</li>
</ul>
<p>以上就是 TCP 拥塞控制的经典算法: <strong>慢启动</strong>、<strong>拥塞避免</strong>、<strong>快速重传和快速恢复</strong>。</p>
<h2 id="应用层"><a href="#应用层" class="headerlink" title="应用层"></a>应用层</h2><p>应用层我们主要关注HTTP协议，HTTP使用TCP协议作为他的支撑运输协议</p>
<ul>
<li>客户发起一个与服务器的连接</li>
<li>一旦连接建立，浏览器和服务器间的进程可以通过套接字接口来访问TCP</li>
<li>客户通过套接字发送HTTP请求报文，从套接字接收HTTP响应报文</li>
<li>TCP提供可靠的数据传输服务</li>
<li>服务器的响应报文完整的回到客户端</li>
</ul>
<p>注意：HTTP是一个无状态协议，服务器向客户发送被请求的文件，不存储任何关于该客户的状态信息</p>
<h2 id="1-HTTP报文格式"><a href="#1-HTTP报文格式" class="headerlink" title="1. HTTP报文格式"></a>1. HTTP报文格式</h2><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bf4548d75bf041b59242815ac63b109a~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<p>访问 <a target="_blank" rel="noopener" href="http://hackr.jp/">http://hackr.jp</a> 时，请求报文的首部信息</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/584b950beeeb4955892c67312ee35840~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<h4 id="1-HTTP请求报文"><a href="#1-HTTP请求报文" class="headerlink" title="(1)HTTP请求报文"></a>(1)HTTP请求报文</h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1992b2f6fc3148eeb7cf1885e9d39c5a~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<ul>
<li><p>请求行：请求方法 + URI + 协议版本</p>
<ul>
<li><p>请求方法：GET、POST、PUT、HEAD、OPTIONS、TRACT、CONNECT、LINK、UNLINK</p>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
<th>支持的HTTP版本</th>
</tr>
</thead>
<tbody><tr>
<td>Get</td>
<td>获取资源</td>
<td>1.0、1.1</td>
</tr>
<tr>
<td>POST</td>
<td>传输实体主体</td>
<td>1.0、1.1</td>
</tr>
<tr>
<td>PUT</td>
<td>传输文件</td>
<td>1.0、1.1</td>
</tr>
<tr>
<td>HEAD</td>
<td>获取报文首部</td>
<td>1.0、1.1</td>
</tr>
<tr>
<td>DELETE</td>
<td>删除文件</td>
<td>1.1</td>
</tr>
<tr>
<td>OPTIONS</td>
<td>询问支持的方法</td>
<td>1.1</td>
</tr>
<tr>
<td>TRACK</td>
<td>追踪路径</td>
<td>1.1</td>
</tr>
<tr>
<td>CONNECT</td>
<td>要求使用隧道协议连接代理</td>
<td>1.1</td>
</tr>
<tr>
<td>LINK</td>
<td>建立和资源之间的联系</td>
<td>1.0</td>
</tr>
<tr>
<td>UNLINK</td>
<td>断开连接关系</td>
<td>1.0</td>
</tr>
</tbody></table>
</li>
<li><p>URI<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/6809eabbeb6d43ca8f08d9ebf418a459~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<ul>
<li>协议：http和https</li>
<li>登录信息：可选，指定用户名和密码作为从服务器端获取资料的登录信息</li>
<li>服务器地址：常见的URL，通过DNS解析成主机唯一的IP地址</li>
<li>端口号：访问服务器的套接字，web服务器默认端口号是80</li>
<li>带层次的文件路径：指定服务器上的特定文件路径获取资源</li>
<li>查询字符：可选，对于已指定的文件路径内的资源可以使用查询字符串</li>
<li>片段标识符：可选，标记出已获取资源中的子资源</li>
</ul>
</li>
<li><p>协议版本：http0.9、http1.0、http1.1</p>
</li>
</ul>
</li>
<li><p>首部字段：见下</p>
</li>
<li><p>报文实体内容</p>
</li>
</ul>
<h4 id="2-HTTP响应报文"><a href="#2-HTTP响应报文" class="headerlink" title="2.HTTP响应报文"></a>2.HTTP响应报文</h4><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/424e4a94a5c94b5c904960788e273287~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<ul>
<li><p>状态行：协议版本 + 状态码 + 状态码的原因短语</p>
<ul>
<li><p>协议版本：http0.9、http1.0、http1.1</p>
</li>
<li><p>状态码：<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5acdcf6db3bb49a7a395797def8d0524~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<ul>
<li>200 ok：正常处理了</li>
<li>204 No Content：接受的请求已经成功处理，但是返回的响应报文中不含实体的主体部分</li>
<li>206 Partial Content：该状态码表示客户端进行了范围请求，而服务器成功执行了这部分的GET请求</li>
<li>301 Moved Permanently：永久性重定向，表示请求得资源已经被分配了新的URI</li>
<li>302 Found：临时性重定向，表示请求得资源已经分配了新的URI</li>
<li>303 See Other：请求的资源存在着另一个URI，应使用GET方法定向获取请求的资源</li>
<li>304 Not Modified：服务器允许访问资源，但是未满足条件的情况</li>
<li>307 Temporary Redirect：临时重定向</li>
<li>400 Bad Request：请求报文中存在着语法错误</li>
<li>401 Unauthorized：需要有通过HTTP认真的认证信息</li>
<li>403 Forbidden：请求资源被服务器拒绝了</li>
<li>404 Not Found：服务器上无法找到请求的资源</li>
<li>500 Internal Server Error：服务器在执行请求时出现了错误</li>
<li>503 Service Unavailable：服务器超负荷或正在进行停机维护</li>
</ul>
</li>
</ul>
</li>
<li><p>首部字段：见下</p>
</li>
<li><p>主体</p>
</li>
</ul>
<h4 id="3-首部字段"><a href="#3-首部字段" class="headerlink" title="3.首部字段"></a>3.首部字段</h4><ul>
<li>通用首部字段<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d7ab00ebb9f5444aaf5e4e6c94fce533~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></li>
<li>请求首部字段<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/701ab7bf3e0f46868939c22d7d2a626b~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></li>
<li>响应首部字段<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/cf269def9d514f49aedf18ca373201fd~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></li>
<li>实体首部字段<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e63a006004a4255968ddfa7c871eb7b~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></li>
</ul>
<h2 id="2-get和post的区别"><a href="#2-get和post的区别" class="headerlink" title="2. get和post的区别"></a>2. get和post的区别</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903508370538503">你敢在post和get上刁难我，就别怪我装逼了</a></p>
</blockquote>
<ul>
<li>get用来获取数据，post用来提交数据</li>
<li>get参数有长度限制（受限于url长度，具体的数值取决于浏览器和服务器的限制，最长2048字节），而post无限制。</li>
<li>get请求的数据会附加在url之 ，以 “ ？ “分割url和传输数据，多个参数用 “&amp;”连接，而post请求会把请求的数据放在http请求体中。</li>
<li>get是明文传输，post是放在请求体中，但是开发者可以通过抓包工具看到，也相当于是明文的。</li>
<li>get请求会被浏览器主动cache，而post不会，除非手动设置。</li>
</ul>
<h2 id="3-持续连接和非持续连接"><a href="#3-持续连接和非持续连接" class="headerlink" title="3. 持续连接和非持续连接"></a>3. 持续连接和非持续连接</h2><p>从 Http0.9 到 Http2 要发送多个请求，从<strong>多个 Tcp 连接&#x3D;&gt;keep-alive&#x3D;&gt;管道化&#x3D;&gt;多路复用</strong>不断的减少多次创建 TCP 等等带来的性能损耗。</p>
<h4 id="（1）非持续连接的HTTP"><a href="#（1）非持续连接的HTTP" class="headerlink" title="（1）非持续连接的HTTP"></a>（1）非持续连接的HTTP</h4><p>客户和服务器间的每一个请求&#x2F;响应都用一个单独的TCP连接发送<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f87fca32b2164ea097c7e235bc6a7819~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<p>缺点：</p>
<ul>
<li>必须为每一个请求对象建立一个全新的连接，客户和服务器中都要分配TCP缓冲区和保持TCP变量，给服务器带来严重负担</li>
<li>每一个对象都要经受两倍RTT的交付时延，一个RTT用于建立TCP，一个用于请求和接收一个对象</li>
</ul>
<h3 id="（2）持续连接的HTTP"><a href="#（2）持续连接的HTTP" class="headerlink" title="（2）持续连接的HTTP"></a>（2）持续连接的HTTP</h3><p>持久连接（HTTP Persistent Connections，也称HTTP keep-alive）</p>
<p>在采用HTTP1.1持续连接的情况下，服务器在发送响应后保持TCP连接的打开，后续的请求报文和响应报文能够通过相同的TCP连接进行传送。<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3b5e15b723a1417fbe880738e9abad53~tplv-k3u1fbpfcp-zoom-1.image" alt="在这里插入图片描述"></p>
<h5 id="管线化"><a href="#管线化" class="headerlink" title="管线化"></a>管线化</h5><p>持久的连接使得管线化成为可能——不需要等待下一个请求得到响应就可以进行下一次请求<br><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/36a0f4f6bbd842949075b30307877ff9~tplv-k3u1fbpfcp-zoom-1.image" alt=" "></p>
<h5 id="多路复用"><a href="#多路复用" class="headerlink" title="多路复用"></a>多路复用</h5><p>HTTP 传输是基于<code>请求-应答</code>的模式进行的，报文必须是一发一收，但值得注意的是，里面的任务被放在一个任务队列中串行执行，一旦队首的请求处理太慢，就会阻塞后面请求的处理。这就是著名的<code>HTTP队头阻塞</code>问题。</p>
<p>多路复用代替原来的序列和阻塞机制。所有就是请求的都是通过一个 TCP 连接并发完成。因为在多路复用之前所有的传输是基于基础文本的，在多路复用中是基于二进制数据帧的传输、消息、流，所以可以做到乱序的传输。多路复用对同一域名下所有请求都是基于流，所以不存在同域并行的阻塞。多次请求如下图：</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ba5ebdddac8a4d79887bb2f968478381~tplv-k3u1fbpfcp-zoom-1.image" alt="http2.0"></p>
<h2 id="4-http各版本的区别"><a href="#4-http各版本的区别" class="headerlink" title="4. http各版本的区别"></a>4. http各版本的区别</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://juejin.cn/post/6844903923136856078">HTTP各版本特性及区别</a></p>
</blockquote>
<p><strong>HTTP 1.0:</strong></p>
<ul>
<li>任意数据类型都可以发送</li>
<li>有GET、POST、HEAD三种方法</li>
<li>无法复用TCP连接(长连接)</li>
<li>有丰富的请求响应头信息。以header中的<code>Last-Modified</code>&#x2F;<code>If-Modified-Since</code>和<code>Expires</code>作为缓存标识</li>
</ul>
<p><strong>HTTP 1.1:</strong></p>
<ul>
<li>引入更多的请求方法类型<code>PUT</code>、<code>PATCH</code>、<code>DELETE</code>、<code>OPTIONS</code>、<code>TRACE</code>、<code>CONNECT</code></li>
<li>引入长连接，就是TCP连接默认不关闭，可以被多个请求复用，通过请求头connection:keep-alive设置</li>
<li>引入管道连接机制，可以在同一TCP连接里，<code>同时发送</code>多个请求</li>
<li>强化了缓存管理和控制<code>Cache-Control</code>、<code>ETag</code>&#x2F;<code>If-None-Match</code></li>
<li>支持分块响应，断点续传，利于大文件传输，能过请求头中的<code>Range</code>实现</li>
<li>使用了<code>虚拟网络</code>，在一台物理服务器上可以存在多个虚拟主机，并且共享一个IP地址</li>
</ul>
<p><strong>HTTP 2:</strong></p>
<ul>
<li>二进制分帧：不再是纯文本，避免文本歧义，缩小了请求体积</li>
<li>服务器推送：服务器可以额外的向客户端推送资源，而无需客户端明确的请求</li>
<li>多路复用： 在共享TCP链接的基础上同时发送请求和响应</li>
<li>增加了安全性，使用HTTP 2.0，要求必须至少TLS 1.2</li>
<li>使用<code>HPACK算法将头部压缩</code>，用<code>哈夫曼编码</code>建立索表，传送索引大大节约了带宽</li>
</ul>

    </div>

    
    
    

    <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/%E9%9D%A2%E8%AF%95/" rel="tag"># 面试</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2021/09/07/%E7%A7%8B%E6%8B%9B%E4%BF%9D%E9%A9%BE%E6%8A%A4%E8%88%AA%E2%80%94%E2%80%94vue%E7%AF%87/" rel="prev" title="秋招保驾护航——vue篇">
                  <i class="fa fa-chevron-left"></i> 秋招保驾护航——vue篇
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2021/09/09/%E7%A7%8B%E6%8B%9B%E4%BF%9D%E9%A9%BE%E6%8A%A4%E8%88%AA%E2%80%94%E2%80%94%E6%95%B0%E6%8D%AE%E5%BA%93%E7%AF%87/" rel="next" title="秋招保驾护航——数据库篇">
                  秋招保驾护航——数据库篇 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wk</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
