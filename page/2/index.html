<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222"><meta name="generator" content="Hexo 6.3.0">

  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">

<script class="next-config" data-name="main" type="application/json">{"hostname":"example.com","root":"/","images":"/images","scheme":"Pisces","darkmode":false,"version":"8.16.0","exturl":false,"sidebar":{"position":"left","display":"always","padding":18,"offset":12},"copycode":{"enable":false,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"Searching...","empty":"We didn't find any results for the search: ${query}","hits_time":"${hits} results found in ${time} ms","hits":"${hits} results found"}}</script><script src="/js/config.js"></script>

    <meta name="description" content="一个前端程序员">
<meta property="og:type" content="website">
<meta property="og:title" content="wk的博客">
<meta property="og:url" content="http://example.com/page/2/index.html">
<meta property="og:site_name" content="wk的博客">
<meta property="og:description" content="一个前端程序员">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="wk">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://example.com/page/2/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":true,"isPost":false,"lang":"en","comments":"","permalink":"","path":"page/2/index.html","title":""}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>wk的博客</title>
  








  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">wk的博客</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录技术、学习和生活的博客</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="Search" role="button">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>Home</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>About</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>Archives</a></li><li class="menu-item menu-item-schedule"><a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>Schedule</a></li>
  </ul>
</nav>




</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="wk"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">wk</p>
  <div class="site-description" itemprop="description">一个前端程序员</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">55</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">17</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/wk-Nemo" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;wk-Nemo" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://juejin.cn/user/3122268755465879" title="掘金 → https:&#x2F;&#x2F;juejin.cn&#x2F;user&#x2F;3122268755465879" rel="noopener me" target="_blank">掘金</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
  </aside>


    </div>

    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/13/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%A4%8D%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/13/%E8%BD%AF%E4%BB%B6%E6%B5%8B%E8%AF%95%E5%A4%8D%E4%B9%A0/" class="post-title-link" itemprop="url">软件测试复习</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-13 11:29:04" itemprop="dateCreated datePublished" datetime="2021-11-13T11:29:04+08:00">2021-11-13</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:44:18" itemprop="dateModified" datetime="2023-05-07T17:44:18+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" itemprop="url" rel="index"><span itemprop="name">计算机基础</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/%E6%B5%8B%E8%AF%95/" itemprop="url" rel="index"><span itemprop="name">测试</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="考试范围"><a href="#考试范围" class="headerlink" title="考试范围"></a>考试范围</h2><p>时间： 2021.11.14</p>
<p>题目类型：</p>
<ul>
<li>选择题 15</li>
<li>简答题 5-6</li>
<li>设计题：充分性、CFG 3-6</li>
<li>测试生成题</li>
</ul>
<p>考试内容：</p>
<ul>
<li>测试基本概念</li>
<li>测试生成方法（每个方法都涉及）</li>
<li>Junit</li>
<li>谓词分析</li>
<li>边界值</li>
<li>充分性和有效性</li>
<li>自动机</li>
</ul>
<h2 id="简介"><a href="#简介" class="headerlink" title="简介"></a>简介</h2><p><strong>1. 为什么需要软件测试？</strong></p>
<ul>
<li>软件测试可以避免一些软件的漏洞</li>
<li>软件测试可以可以使我们的软件开发更可靠</li>
<li>软件测试可以使我们获得更高质量的软件</li>
</ul>
<p><strong>2. 关于软件测试的一些知识</strong></p>
<p><strong>（1）什么是缺陷（defect）？</strong></p>
<ul>
<li>缺点：运行缓慢。</li>
<li>不一致：Ctrl+S 无法保存所有应用程序。</li>
<li>用户界面设计缺陷：一个按钮上应该显示5个字，但只能看到3个字</li>
</ul>
<p>正确的程序：</p>
<ul>
<li>无语法错误</li>
<li>运行时无明显错误</li>
<li>无不当语句</li>
<li>有效输入-正确输出</li>
<li>无效输入-正确输出</li>
<li>任何可能的输入-正确输出</li>
</ul>
<p><strong>（2）软件质量（Software Quality）</strong></p>
<ul>
<li>满足用户需求</li>
<li>简历合理的进度、成本与功能关系</li>
<li>具备拓展性和灵活性</li>
<li>能有效处理例外情况</li>
<li>保持成本和性能平衡</li>
</ul>
<p><strong>（3）软件质量保证（Software Quality Assurance）</strong></p>
<p>为了确保软件开发过程和结果符合预期要求，而建立的一些列规程，依照规程和计划采取的一系列活动，以及结果评价。</p>
<p><strong>（4）质量监控（Quality Control）</strong></p>
<p>为达到产品的品质要求所采取的作业技术和活动</p>
<p><strong>3. 软件测试的基本概念</strong></p>
<p>（1）软件测试的定义<br>（2）验证（Verification） &amp; 确认（Validation）<br>（3）Test &amp; debug<br>（4）软件测试的目的<br>（5）测试的类型</p>
<p><strong>4. 软件测试在软件发展中扮演的角色</strong></p>
<p>略。</p>
<p><strong>5. 软件测试的基本原则</strong></p>
<ul>
<li>所有测试的标准都是建立在用户需求之上的，测试的目的在于发现系统是否满足规定的需求。</li>
<li>尽早的和不断的测试，越早进行测试，缺陷的修复成本就会越低。</li>
<li>程序员应避免检查自己的程序，由第三方进行测试更客观有效。</li>
<li>穷举测试是不可能的。</li>
<li>充分注意测试中的群集现象，一段程序中一发现的错误数越多，其中存在的错误概率越大，因此对发现错误较多的程序段，应进行更深入的测试。</li>
<li>设计测试用例时应包括合理输入和不合理输入，以及各种边界条件、特殊情况下要制造极端状态和意外状态。</li>
<li>注意回归测试的关联系，往往修改一个错误会引起更多错误。</li>
<li>测试应从“小规模”开始，逐步转向“大规模”。</li>
<li>测试用例式设计出来，不是写出来的，应根据测试的目的，采用相应的方法设计测试用例，从而提高测试的效率，更多的发现错误，提高程序的可靠性。</li>
<li>重视并妥善保存一切测试过程文档（测试计划，测试用例，测试报告等）。</li>
</ul>
<h2 id="Exercise1"><a href="#Exercise1" class="headerlink" title="Exercise1"></a>Exercise1</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.softwaretestinggenius.com/few-brain-teasing-questions-on-verification-and-validation-v-and-v/">答案</a></p>
</blockquote>
<p><strong>1. What sort of errors are covered by regression testing?</strong></p>
<p>问题：回归测试涵盖了哪些类型的错误？</p>
<p>软件回归测试是指修改了旧代码后，重新进行测试以确认修改没有引入新的错误或导致其他代码产生错误。回归测试主要包括四种类型的错误：</p>
<ul>
<li><p>数据损坏错误：由于共享数据，这些错误会导致副作用。</p>
</li>
<li><p>不适当的控制排序错误：由于执行顺序的变化，这些错误会导致副作用。例如，尝试在将项目放入队列之前将其从队列中删除。</p>
</li>
<li><p>资源争用：潜在瓶颈和死锁是此类错误的一些示例。</p>
</li>
<li><p>性能缺陷：计时错误和存储利用率错误是此类错误的一些示例。</p>
</li>
</ul>
<p><strong>2. What is an independent test organization? Why is it necessary?</strong></p>
<p>问题：什么是独立测试机构？为什么需要它？</p>
<p>独立测试组织是指测试产品或系统是否符合自愿共识标准的组织。 作为一个独立的测试机构，该机构不应被任何客户、行业组织或任何其他与被测试产品或系统有经济利益的个人或机构所有或控制。 对于按照自愿性共识标准对产品或系统进行认证、列表或标签的组织，它应保持对产品或系统生产的正式定期检查，以确保已列出、已认证或已标记的产品或系统继续满足适当的要求标准。</p>
<p><strong>3. What is interface analysis?</strong></p>
<p>问题：什么是接口分析？</p>
<p>它是对接口要求规范的详细检查。 这里的评估标准是软件与其他硬件、用户和外部软件之间的接口。</p>
<p>继续并更新软件的关键性分析。 关键性被分配给每个软件需求。 当需求组合成功能时，组合成功能，需求的组合关键性形成聚合功能的关键性。</p>
<p>随着需求变化的引入，关键性分析会定期更新，因为这种变化会导致功能关键性增加或降低，具体取决于修订后的需求如何影响系统关键性。</p>
<p><strong>4. Explain all the phases through which we can approach testing using a sample software testing problem. Comment on difficulty of testing.</strong></p>
<p>问题：解释我们可以使用示例软件测试问题进行测试的所有阶段。 评论测试的难度。</p>
<p>测试过程会依次经历单元测试、集成测试、系统测试、验收测试四个主要阶段：</p>
<ul>
<li>单元测试：单元测试是针对软件设计的最小单位––程序模块甚至代码段进行正确性检验的测试工作，通常由开发人员进行。</li>
<li>集成测试：集成测试是将模块按照设计要求组装起来进行测试，主要目的是发现与接口有关的问题。由于在产品提交到测试部门前，产品开发小组都要进行联合调试，因此在大部分企业中集成测试是由开发人员来完成的。</li>
<li>系统测试：系统测试是在集成测试通过后进行的，目的是充分运行系统，验证各子系统是否都能正常工作并完成设计的要求。它主要由测试部门进行，是测试部门最大最重要的一个测试，对产品的质量有重大的影响。</li>
<li>验收测试：验收测试以需求阶段的《需求规格说明书》为验收标准，测试时要求模拟实际用户的运行环境。对于实际项目可以和客户共同进行，对于产品来说就是最后一次的系统测试。测试内容为对功能模块的全面测试，尤其要进行文档测试。</li>
</ul>
<p><strong>5. What is program slicing?</strong></p>
<p>问题：什么是程序切片？</p>
<p>切片是一种程序分解技术，用于通过代码追溯输出变量，以识别与程序中的计算相关的所有代码语句。</p>
<h2 id="黑盒测试（Black-Box-Testing）"><a href="#黑盒测试（Black-Box-Testing）" class="headerlink" title="黑盒测试（Black-Box Testing）"></a>黑盒测试（Black-Box Testing）</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/yeuteyietir/article/details/93522978">软件测试——黑盒测试</a><br><a target="_blank" rel="noopener" href="https://blog.csdn.net/hongfuqiang/article/details/78840763">黑盒测试的测试方法</a></p>
</blockquote>
<p><strong>概念：</strong> 黑盒测试也称功能测试或数据驱动测试，它是在已知产品所应具有的功能，通过测试来检验每个功能都是否能够正常使用。</p>
<p><strong>黑盒测试用例的设计方法：</strong></p>
<ul>
<li>划分等价类（equivalence class partitioning）</li>
<li>边界值分析  <strong>BVA</strong>（boundary value analysis）</li>
<li>划分类别（category partitioning）</li>
<li>因果图（cause-effect graph）</li>
<li>决策表（decision table）</li>
</ul>
<h2 id="Exercise2"><a href="#Exercise2" class="headerlink" title="Exercise2"></a>Exercise2</h2><p><strong>1. Assume that you have a 10-character-wide ZIP code text box, such as the one shown in Figure 1. What equivalence partitions would you create for this text box?</strong></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5aa6088211614fc6af0369e2ac16bf8d~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>问题：假设有一个要求输入10个字符的邮政编码，对于该文本框该如何等价分类？</p>
<p>至少含有以下等价区间：</p>
<ul>
<li>特殊字符，如10个*或￥；</li>
<li>英文字母，如ABCDefghik；</li>
<li>小于十个字符，如123；</li>
<li>大于十个字符，如11111111111；</li>
<li>数字和其他混合，如123AAAAAAA；</li>
<li>空字符；</li>
<li>保留字符；</li>
</ul>
<p><strong>2. What is the difference between weak normal and strong normal equivalence class testing?</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/112810758">《等价类划分》-有这篇就够了</a></p>
</blockquote>
<p>问题：弱一般等价类和强一般等价类之间的区别？</p>
<p><strong>弱一般等价类：</strong> 遵循单缺陷原则，要求用例覆盖每一个变量的一种取值即可，取值为有效值。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e87845d2a1af491c86f54e2db448452b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>强一般等价类：</strong> 遵循多缺陷原则，要求用例覆盖每个变量的每种取值之间的迪卡尔乘积，即<strong>所有变量所有取值的所有组合</strong>，取值为有效值。</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e1b89f48658443318a3183345e7d3d9f~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>3. Consider a program given below for the selection of the largest of numbers.</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">main() &#123;</span><br><span class="line">    <span class="type">float</span> A, B, C;</span><br><span class="line">    <span class="built_in">printf</span> (“Enter <span class="number">3</span> values:”);</span><br><span class="line">    <span class="built_in">scanf</span> (“%d%d%d”, &amp;A, &amp;B, &amp;C);</span><br><span class="line">    <span class="built_in">printf</span> (“Largest value is”);</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> (A &gt; B)  &#123;</span><br><span class="line">        <span class="keyword">if</span> (A &gt; C)</span><br><span class="line">            <span class="built_in">printf</span> (“%d\n”, A);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span> (“%d\n”, C);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (C &gt; B) </span><br><span class="line">            <span class="built_in">printf</span> (“%d”, C);</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">printf</span> (“%f”, B);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>a. Design the set of test cases using BVA technique and equivalence class testing technique.</strong></p>
<p>问题：分别使用边界值分析和等价划分类方法设计测试用例。</p>
<ul>
<li>A, B, C 中一个或多个为非数字 （无效等价类）</li>
<li>A&gt;&#x3D;B and A&gt;&#x3D;C （有效等价类）</li>
<li>B&gt;&#x3D;A and B&gt;&#x3D;C （有效等价类）</li>
<li>C&gt;&#x3D;A and C&gt;&#x3D;B （有效等价类）</li>
</ul>
<p><strong>b. Select a set of test cases that will provide 100% statement coverage.</strong></p>
<table>
<thead>
<tr>
<th>A</th>
<th>B</th>
<th>C</th>
</tr>
</thead>
<tbody><tr>
<td>10</td>
<td>5</td>
<td>1</td>
</tr>
<tr>
<td>5</td>
<td>1</td>
<td>10</td>
</tr>
<tr>
<td>1</td>
<td>5</td>
<td>10</td>
</tr>
<tr>
<td>1</td>
<td>10</td>
<td>5</td>
</tr>
</tbody></table>
<p><strong>c. Develop a decision table for this program.</strong></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3660c9105b7e4b8b82d5724504f11e29~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>4. Drive equivalence class for input variables below.</strong></p>
<p><strong>a. int pen_inventory; （表示签字笔的当前库存）</strong></p>
<ul>
<li>有效等价类：非负整数</li>
<li>无效等价类：负数、小数或者其他任何形式的非数字的输入</li>
</ul>
<p><strong>b. string planet_name; （表示行星的名字）</strong></p>
<ul>
<li>有效等价类：已定义过的行星的名字</li>
<li>无效等价类：非定义的行星的名字、任何其他形式的特殊输入</li>
</ul>
<p><strong>c. operating_system&#x3D;{“OS X”, “Windows XP”, “Windows 2000”, “Unix”, “Linux”, “Xinu”, “VxWorks”}; （操作系统的名字）</strong></p>
<ul>
<li>有效等价类：集合中的任何一个操作系统名称</li>
<li>无效等价类：除开集合外的任何输入</li>
</ul>
<p><strong>d. printer_class&#x3D; set printer_name;（打印机名字的集合） printer_class p;</strong></p>
<ul>
<li>有效等价类：打印机集合中的任何一个名字</li>
<li>无效等价类：除了集合中内容外的任何输入</li>
</ul>
<p><strong>e. int name [1.10]; （一个最多包含10个整数的数组）</strong></p>
<ul>
<li>有效等价类：输入的长度在1到10之间（包括边界）的整数序列</li>
<li>无效等价类：空数组、长度超过10的数组、任何形式的包含一位或多位非数字的输入序列</li>
</ul>
<p><strong>5. Consider an example of grading a student in a university. The grading is done as below:</strong></p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e3157d5ee035444aa34bff9f5acc80aa~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>The marks of any three subjects are considered for the calculation of average marks. Scholarships of <code>$1000</code> and <code>$500</code> are given to students securing more than 90% and 85% marks, respectively. Develop a decision table, cause effect graph, and generate test cases for the above scenario.</strong></p>
<p>问题： 计算平均分时，会考虑任何三门科目的分数。 分别为分数超过 90% 和 85% 的学生提供 1000 美元和 500 美元的奖学金。 针对上述场景开发决策表、因果图并生成测试用例。</p>
<p>cause：</p>
<ul>
<li>c1 平均分大于90%</li>
<li>c2 平均分等于90%</li>
<li>c3 平均大于85%且平均分小于90%</li>
<li>c4 平均分大于等于75%且小于等于85%</li>
<li>c5 平均分大于等于60%且小于等于74%</li>
<li>c6 平均分大于等于50%且小于等于59%</li>
<li>c7 平均分大于等于0%且小于50%</li>
</ul>
<p>effect：</p>
<ul>
<li>e1 A+</li>
<li>e2 A</li>
<li>e3 B</li>
<li>e4 C</li>
<li>e5 Fail</li>
<li>e6 获得1000奖学金</li>
<li>e7 获得500奖学金</li>
</ul>
<p><strong>决策表：</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4369424c18d945de990303ac9cb729ea~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>因果图：</strong></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d3e694e8bd9f4e8aa31887d7adc64dd0~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>测试用例：</strong></p>
<p>列举三个成绩的平均值分别对应cause中的几种情况</p>
<h2 id="白盒测试（White-Box-Testing）"><a href="#白盒测试（White-Box-Testing）" class="headerlink" title="白盒测试（White-Box Testing）"></a>白盒测试（White-Box Testing）</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/Ming8006/p/5798186.html">白盒测试：理论基础</a></p>
</blockquote>
<p><strong>概念：</strong> 把测试对象看做一个透明的盒子，它允许测试人员利用程序内部的逻辑结构及有关信息，设计或选择测试用例，对程序所有逻辑路径进行测试。</p>
<p><strong>白盒测试基本要求：</strong></p>
<ul>
<li>保证一个模块中的所有独立路径至少被执行一次；</li>
<li>对所有的逻辑值均需要测试真、假两个分支；</li>
<li>在上下边界及可操作范围内运行所有循环；</li>
<li>检查内部数据结构以确保其有效性。</li>
</ul>
<p><strong>测试覆盖标准：</strong></p>
<ol>
<li><p><strong>语句覆盖</strong>：是一个比较弱的测试标准，它的含义是：选择足够的测试用例，<strong>使得程序中每个语句至少都能被执行一次</strong>。</p>
<ul>
<li>它是最弱的逻辑覆盖，效果有限，必须与其它方法交互使用。</li>
</ul>
</li>
<li><p><strong>判定覆盖</strong>（也称为<strong>分支覆盖</strong>）：执行足够的测试用例，<strong>使得程序中的每一个分支至少都通过一次</strong>。</p>
<ul>
<li>判定覆盖只比语句覆盖稍强一些，但实际效果表明，只是判定覆盖，还不能保证一定能查出在判断的条件中存在的错误。因此，还需要更强的逻辑覆盖准则去检验判断内部条件。</li>
</ul>
</li>
<li><p><strong>条件覆盖</strong>：执行足够的测试用例，<strong>使程序中每个判断的每个条件的每个可能取值至少执行一次</strong>。</p>
<ul>
<li>条件覆盖深入到判定中的每个条件，但可能不能满足判定覆盖的要求。</li>
</ul>
</li>
<li><p><strong>判定&#x2F;条件覆盖</strong>：执行足够的测试用例，<strong>使得判定中每个条件取到各种可能的值，并使每个判定取到各种可能的结果。</strong></p>
</li>
<li><p><strong>条件组合覆盖</strong>：执行足够的例子，<strong>使得每个判定中条件的各种可能组合都至少出现一次</strong>。</p>
<ul>
<li>这是一种相当强的覆盖准则，可以有效地检查各种可能的条件取值的组合是否正确。</li>
<li>它不但可覆盖所有条件的可能取值的组合，还可覆盖所有判断的可取分支，但可能有的路径会遗漏掉。</li>
<li>测试还不完全。</li>
</ul>
</li>
</ol>
<p><strong>白盒测试的主要方法：</strong></p>
<ol>
<li><p>逻辑驱动测试</p>
<ul>
<li>语句覆盖</li>
<li>判定覆盖</li>
<li>条件覆盖</li>
<li>判定&#x2F;条件覆盖</li>
<li>条件组合覆盖</li>
</ul>
</li>
<li><p>路径测试</p>
<ul>
<li>路径测试就是设计足够多的测试用例，覆盖被测试对象中的所有可能路径。这是最强的覆盖准则。</li>
<li>基本路径测试：设计足够多的测试用例，运行所测程序，<strong>要覆盖程序中所有可能的路径</strong>。但在路径数目很大时，真正做到完全覆盖是很困难的，<strong>必须把覆盖路径数目压缩到一定限度</strong>。例如程序中的循环体只执行一次。</li>
</ul>
</li>
</ol>
<h2 id="Exercise3"><a href="#Exercise3" class="headerlink" title="Exercise3"></a>Exercise3</h2><p><strong>1. The basis set for a program is constructed using its CFG（Control Flow Graph）. Now suppose that the program contains compound predicates. Do you think the basis set for this program will depend on how compound predicates are represented in the flow graph? Explain your answer.</strong></p>
<p>问题：程序的基本组成是使用控制流图构建的。现在假设程序包含复合谓词，你认为复合谓词在流程图中的表示方式会决定这个程序的基本组成吗？ 解释你的答案。</p>
<p>不会。当一个普通的流程图中有复合谓词时，这些谓词之间会指示出不止一个基本路径。为了给程序构建一个基集，复合谓词应该被拆分成不能再分解的节点，以暴露更详细的路径，这有利于以后更彻底地创建测试用例。</p>
<p>*<em>2. Example 2. 1 Consider the following program that takes two non-negative integers <em>x</em>1 and <em>y</em>1 as inputs and computes their greatest common divisor.</em>*</p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c7e3a512b9984155a34ce76b832bcf52~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>(a) List the different paths in the program in Example2.1 when the loop body is traversed twice.</strong></p>
<p>问题： 列出例 2.1 中程序中循环体被遍历两次时的不同路径。</p>
<p>流程控制图：</p>
<p><img src="https://p9-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ea35b228d1e4fa39b96737cbaba7915~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>路径：</p>
<p>P1 &#x3D; { Start, 1, 2, 3, 4, 5, 3, 4, 5, 3, 7, End }</p>
<p>P2 &#x3D; { Start, 1, 2, 3, 4, 5, 3, 4, 6, 3, 7, End }</p>
<p>P3 &#x3D; { Start, 1, 2, 3, 4, 6, 3, 4, 5, 3, 7, End }</p>
<p>P4 &#x3D; { Start, 1, 2, 3, 4, 6, 3, 4, 6, 3, 7, End }</p>
<p><strong>(b) For each path list the path conditions and a few sample values in the corresponding input domain.</strong></p>
<p>问题： 对于每个路径，列出相应输入域中的路径条件和一些示例值。</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2e020b2474304adfaed8b2aa58f6710e~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>3. struct a program in your favorite language that inputs three integers x, y, and z and computes output O using the specification in Table 1. Assume that <em>f</em> <em>1</em> <em>(x, y, z) &#x3D; x + y + z and f</em> <em>2</em> <em>(x, y, z) &#x3D; x * y * z</em>.</strong></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/65aafa4407e9445995e6d464f11331e7~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>Introduce an error in your program. Now construct a test set Τ that is decision-adequate, but is not multiple condition-adequate, and does not reveal the error you introduced. Enhance Τ so that it is multiple condition-adequate and does reveal the error. Will all tests that are multiple condition-adequate for your program reveal the error?</strong></p>
<p>下面一段代码的边界处处理有问题：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">function</span> <span class="title function_">f1</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x + y +z</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">f2</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="keyword">return</span> x*y*z</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">answer</span>(<span class="params">x, y, z</span>) &#123;</span><br><span class="line">  <span class="keyword">if</span>(x &lt; y) &#123;</span><br><span class="line">    <span class="keyword">return</span> x &lt;= z ? <span class="title function_">f1</span>(x, y, z) : <span class="title function_">f2</span>(x, y, z)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> x &lt;= z ? <span class="title function_">f2</span>(x, y, z) : <span class="title function_">f1</span>(x, y, z)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>结果符合预期：</p>
<pre><code>T1 = &#123;

t1 = &lt; x = 3, y = 5, z = 7&gt;, // expected: 15

t2 = &lt; x = 5, y = 7, z = 3&gt;, // expected: 105

t3 = &lt; x = 5, y = 3, z = 7&gt;, // expected: 105

t4 = &lt; x = 7, y = 5, z = 3&gt; // expected: 15

&#125;
</code></pre>
<p>测试出程序有问题：</p>
<pre><code>T2 = &#123;

t1 = &lt; x = 3, y = 5, z = 7&gt;, // expected: 15

t2 = &lt; x = 5, y = 7, z = 3&gt;, // expected: 105

**t3 = &lt; x = 6, y = 7, z = 6&gt;,** **/** **/ expected: 252**

t4 = &lt; x = 5, y = 3, z = 7&gt;, // expected: 105

**t5 = &lt; x = 4, y = 4, z = 7&gt;, // expected: 112**

t6 = &lt; x = 7, y = 5, z = 3&gt;, // expected: 15

t7 = &lt; x = 3, y = 3, z = 3&gt; // expected: 9

&#125;
</code></pre>
<h2 id="Exercise4"><a href="#Exercise4" class="headerlink" title="Exercise4"></a>Exercise4</h2><p><strong>BOR</strong></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/8ee07ee61b5145c4b32fee83b7673458~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>BRO</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/28f1c93601d9446795ad6234a3929ebe~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>1. Consider the condition <em>C</em> : (<em>a +</em> 1 &gt; <em>b</em>)∧ (<em>c</em> &#x3D; <em>d</em>) <em>,</em> where <em>a, b, c,</em> and <em>d</em> are type compatible variables.</strong></p>
<p>**(a) Let <em>S</em>1 &#x3D; {(&gt;, &#x3D;), (&gt;, &gt;), (&gt;, &lt;), (&#x3D;, &#x3D;),(&lt;, &#x3D;)} be a set of constraints on <em>C</em>. please  construct a test set <em>T</em>1 that satisfies <em>S</em>1 and show that <em>T</em> is BRO-adequate.**</p>
<p>**(b) Now consider the constraint set <em>S</em>2 <em>&#x3D;</em> {(+ϵ, &#x3D;), (&#x3D;, –ϵ), (–ϵ, &#x3D;), (+ϵ, +ϵ)} on <em>C</em>. Construct a test set <em>T</em>2 that satisfies <em>S</em>2 <em>.</em> Is <em>T</em> BRE adequate ? Assume that ϵ &#x3D; 1**</p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fcec277d83ac472bbb1967474f9ccb3b~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>2. Let <em>A</em> &#x3D; {(&lt;, &#x3D;), (&gt;, &lt;)} and *Β* &#x3D; {(t, &#x3D;), (t, &gt;), (f, &lt;)} be two constraint sets. Compute <em>A × B</em> and <em>A</em> ⊗ <em>B.</em></strong></p>
<p><em>A × B &#x3D;</em>  {(&lt;, &#x3D;, t, &#x3D;), (&lt;, &#x3D;, t, &gt;), (&lt;, &#x3D;, f, &lt;), (&gt;, &lt;, t, &#x3D;), (&gt;, &lt;, t, &gt;), (&gt;, &lt;, f, &lt;)}</p>
<p><em>A</em> ⊗ <em>B</em> &#x3D; {(&lt;, &#x3D;, t, &#x3D;), (&gt;, &lt;, t, &lt;), (&gt;, &lt;, f, &lt;)}</p>
<p><strong>3. Consider the cause-effect graph shown in Figure 1 that exhibits the relationship between several causes and effect <em>E.</em></strong></p>
<p><strong>(1) Derive a test set <em>T</em> <em>CEG</em> to test the implementation of <em>Ε</em> using the test generation procedure described in Cause-effect graphing.</strong></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/30f68b7fa6704852bf37e520b69ca1c7~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><strong>(2) Construct a Boolean expression <em>p</em> <em>r</em> from the Figure1 that represents the condition for the effect to occur. Select one of the two procedures BOR-CSET, BRO-CSET and apply it to construct a test set from <em>p</em> <em>r</em> <em>.</em>  Assume that there might be errors in the relational expressions that represent various causes effecting <em>E.</em> Construct a test set <em>T</em> <em>B</em> from the constraints you derive.</strong></p>
<p>(1)</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab9673c475924938a2b4a6866106b452~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">E = -( (a&lt;b) ^ (c &gt;d) ) V ( w )</span><br><span class="line"></span><br><span class="line">T_CEG = &#123;</span><br><span class="line"></span><br><span class="line">    t1: &lt;a=1, b=2, c=1, d=0, w=t&gt;,</span><br><span class="line"></span><br><span class="line">    t2: &lt;a=1, b=2, c=1, d=1, w=t&gt;,</span><br><span class="line"></span><br><span class="line">    t3: &lt;a=1, b=0, c=1, d=0, w=t&gt;,</span><br><span class="line"></span><br><span class="line">    t4: &lt;a=1, b=0, c=1, d=1, w=t&gt;,</span><br><span class="line"></span><br><span class="line">    t5: &lt;a=1, b=1, c=1, d=1, w=f&gt;,</span><br><span class="line"></span><br><span class="line">    t6: &lt;a=1, b=0, c=1, d=0, w=f&gt;,</span><br><span class="line"></span><br><span class="line">    t7: &lt;a=1, b=0, c=1, d=1, w=f&gt;,</span><br><span class="line"></span><br><span class="line">    t8: &lt;a=1, b=1, c=1, d=0, w=f&gt;,</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>(2)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Pr = -( (a&lt;b) ^ (c &gt;d) ) V ( w )</span><br></pre></td></tr></table></figure>

<p>BRO</p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7e6bdfac2f72433ba5ea6d719ac1b0f8~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62304451d1cb47f8bceb271cd00bd3f9~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h2 id="单元测试（Unit-Testing）"><a href="#单元测试（Unit-Testing）" class="headerlink" title="单元测试（Unit Testing）"></a>单元测试（Unit Testing）</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.jianshu.com/p/a3fa5d208c93">使用JUnit进行单元测试</a></p>
</blockquote>
<h2 id="集成测试（Integration-Testing）"><a href="#集成测试（Integration-Testing）" class="headerlink" title="集成测试（Integration Testing）"></a>集成测试（Integration Testing）</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/chengyuweng7838/article/details/100996270">什么是集成测试（集成测试示例教程）</a></p>
</blockquote>
<h2 id="性能测试（Performance-Testing）"><a href="#性能测试（Performance-Testing）" class="headerlink" title="性能测试（Performance Testing）"></a>性能测试（Performance Testing）</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/puresoul/p/5456855.html">性能测试总结(一)—基础理论篇</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/puresoul/p/5463477.html">性能测试总结(二)—测试流程篇</a></p>
</blockquote>
<h2 id="Exercise5"><a href="#Exercise5" class="headerlink" title="Exercise5"></a>Exercise5</h2><p><strong>1. How to conduct performance testing?</strong></p>
<p>问题：如何进行性能分析？</p>
<ul>
<li>性能需求分析</li>
<li>测试准备</li>
<li>测试执行</li>
<li>结果分析和调优</li>
<li>报告和总结</li>
</ul>
<p><strong>2. 案例分析:针对某公司办公自动化（OA）系统的负载压力测试，采用专业的负载压力测试工具来执行测试。系统采用 Browse&#x2F;Server 架构，服务器是一台 PC Server （4 路 2.7GHz 处理器， 4GB  内存），安装的平台软件包括 Microsoft  Internet  Information  Server  5.0，ASP.NET， SQLServer 2000。使用 2 台笔记本电脑安装测试工具模拟客户端执行“登录”业务操作。</strong></p>
<p><strong>测试需求分别为以下两个：</strong></p>
<p><strong>第一，测试系统分别在 2M、4M 网络带宽下，能够支持用户登录的最大并发用户数；</strong> </p>
<p><strong>第二，测试服务器的吞吐量（即：每秒可以处理的交易数），主要包括服务器 CPU 平均使用率达到 85%时系统能够支持的最大吞吐量和服务器 CPU 平均使用率达到 100%时系统能够支持的最大吞吐量。</strong></p>
<p><strong>本次性能测试的测试目标是：</strong></p>
<p><strong>1） 指标“响应时间”合理范围为 0～5 秒，可支持的最大并发用户数；</strong></p>
<p><strong>2） 评测系统的服务器资源是否合理，是否需要进行改进。</strong></p>
<p><strong>3） 网络带宽是否使用合理。</strong></p>
<p><strong>作为一个测试人员，你准备怎么实施本项任务？</strong></p>
<p>结合第一题的几个步骤自己发挥</p>
<h2 id="系统测试（System-Testing）"><a href="#系统测试（System-Testing）" class="headerlink" title="系统测试（System Testing）"></a>系统测试（System Testing）</h2><p><strong>系统测试概念</strong></p>
<p><strong>系统测试方法</strong></p>
<p><strong>系统测试过程</strong></p>
<p><strong>FSM（自动机）</strong></p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.yuque.com/docs/share/af6b8877-5bba-4d52-aebd-d39520f85963#">计算题（小天版本）</a></p>
</blockquote>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/12/Java%E4%B8%AD%E7%9A%84%E5%8F%8D%E5%B0%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/12/Java%E4%B8%AD%E7%9A%84%E5%8F%8D%E5%B0%84/" class="post-title-link" itemprop="url">Java中的反射</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-12 17:06:13" itemprop="dateCreated datePublished" datetime="2021-11-12T17:06:13+08:00">2021-11-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:47" itemprop="dateModified" datetime="2023-05-07T17:47:47+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="反射：框架设计的灵魂"><a href="#反射：框架设计的灵魂" class="headerlink" title="反射：框架设计的灵魂"></a>反射：框架设计的灵魂</h2><p><strong>概念：</strong> 将类的各个组成部分<strong>封装为其他对象</strong>，这就是反射机制。</p>
<p><strong>Java代码在计算机中经历的三个阶段：</strong></p>
<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7362531b029345ae822610dd5dd32891~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p>好处：</p>
<ul>
<li>可以在程序运行的过程中可以操作这些对象</li>
<li>可以解耦，提高程序的可扩展性</li>
</ul>
<p><strong>获取<code>class</code>对象的三个阶段，分别对应上面的三个阶段：</strong></p>
<ul>
<li><code>class.forName(&quot;全类名&quot;)</code>：将字节码文件加载进内存，返回<code>class</code>对象<ul>
<li>多用于配置文件，将类名定义在配置文件中。读取文件，加载类。</li>
</ul>
</li>
<li><code>类名.class</code>：通过类名的属性获取<ul>
<li>多用于参数的传递</li>
</ul>
</li>
<li><code>对象.getClass()</code>：继承自<code>Object</code>的方法<ul>
<li>多用于对象的获取字节码的方式</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.domian.Person;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo1</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls1</span> <span class="operator">=</span> Class.forName(<span class="string">&quot;cn.itcast.domian.Person&quot;</span>);</span><br><span class="line">    System.out.println(cls1);</span><br><span class="line"></span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls2</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    System.out.println(cls2);</span><br><span class="line"></span><br><span class="line">    <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls3</span> <span class="operator">=</span> p.getClass();</span><br><span class="line">    System.out.println(cls3);</span><br><span class="line"></span><br><span class="line">    System.out.println(cls1 == cls2); <span class="comment">// true</span></span><br><span class="line">    System.out.println(cls1 == cls3); <span class="comment">// true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>结论：同一个字节码文件（.class）在一次程序运行的过程中，只会被加载一次，不论是通过哪一种方式获取的<code>class</code>对象都是一个。</p>
<h2 id="class对象的功能"><a href="#class对象的功能" class="headerlink" title="class对象的功能"></a>class对象的功能</h2><h3 id="获取成员变量们"><a href="#获取成员变量们" class="headerlink" title="获取成员变量们"></a>获取成员变量们</h3><ul>
<li><code>Field[] getFileds()</code>：获取所有<code>public</code>修饰的成员变量</li>
<li><code>Field[] getFiled(String name)</code>：获取指定的<code>public</code>修饰的成员变量</li>
<li><code>Field[] getDeclareFileds()</code>：获取所有的成员变量（不考虑修饰符）</li>
<li><code>Field[] getDeclareFiled(String name)</code>：获取指定的成员变量（不考虑修饰符）</li>
</ul>
<p><code>Filed</code>：成员变量</p>
<ul>
<li>获取值：<code>void set(Object obj, Object value)</code></li>
<li>设置值：<code>get(Object obj)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.domian.Person;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo2</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">personClass</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取成员变量</span></span><br><span class="line">    System.out.println(<span class="string">&quot;========getFields========&quot;</span>);</span><br><span class="line">    Field[] fileds = personClass.getFields();</span><br><span class="line">    <span class="keyword">for</span>(Field field: fileds) &#123;</span><br><span class="line">      System.out.println(field);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;---------------&quot;</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">a</span> <span class="operator">=</span> personClass.getField(<span class="string">&quot;a&quot;</span>);</span><br><span class="line">    <span class="type">Object</span> <span class="variable">value</span> <span class="operator">=</span> a.get(p);</span><br><span class="line">    System.out.println(value);</span><br><span class="line">    a.set(p, <span class="string">&quot;张三&quot;</span>);</span><br><span class="line">    System.out.println(p);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;=======getDeclaredFields=========&quot;</span>);</span><br><span class="line">    Field[] declareFileds = personClass.getDeclaredFields();</span><br><span class="line">    <span class="keyword">for</span>(Field field: declareFileds) &#123;</span><br><span class="line">      System.out.println(field);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;---------------&quot;</span>);</span><br><span class="line">    <span class="type">Field</span> <span class="variable">name</span> <span class="operator">=</span> personClass.getDeclaredField(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">    <span class="comment">// 直接访问private会报错，该设置可以忽略权限修饰符的安全检查</span></span><br><span class="line">    name.setAccessible(<span class="literal">true</span>); <span class="comment">// 暴力反射</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">value2</span> <span class="operator">=</span> name.get(p);</span><br><span class="line">    System.out.println(value2);</span><br><span class="line">    name.set(p, <span class="string">&quot;wk&quot;</span>);</span><br><span class="line">    System.out.println(p);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f37ccf0912ef487c8297dd00dd8275a3~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/08bb66e65c7f424ba6392fcd116a8409~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h3 id="获取构造方法们"><a href="#获取构造方法们" class="headerlink" title="获取构造方法们"></a>获取构造方法们</h3><ul>
<li><code>Constructor&lt;?&gt;[] getConstructors()</code></li>
<li><code>Constructor&lt;T&gt; getConstructor(类&lt;?&gt;... parameterTypes)</code></li>
<li><code>Constructor&lt;?&gt;[] getDeclareConstructors()</code></li>
<li><code>Constructor&lt;T&gt; getDeclareConstructor(类&lt;?&gt;... parameterTypes)</code></li>
</ul>
<p><code>Constructor</code>：构造方法</p>
<ul>
<li>创建对象：<code>T newInstance(Object... initargs)</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.domian.Person;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Field;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo3</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">personClass</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取成员变量</span></span><br><span class="line">    System.out.println(<span class="string">&quot;========getConstructors========&quot;</span>);</span><br><span class="line">    <span class="type">Constructor</span> <span class="variable">constructor</span> <span class="operator">=</span> personClass.getConstructor(String.class, <span class="type">int</span>.class);</span><br><span class="line">    System.out.println(constructor);</span><br><span class="line">    <span class="comment">// 创建对象</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">person</span> <span class="operator">=</span> constructor.newInstance(<span class="string">&quot;zhangsan&quot;</span>, <span class="number">33</span>);</span><br><span class="line">    System.out.println(person);</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;=======getDeclareConstructors=========&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/86593d22a1364f9fa84e96e4b8897c20~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h3 id="获取成员方法们"><a href="#获取成员方法们" class="headerlink" title="获取成员方法们"></a>获取成员方法们</h3><ul>
<li><code>Method[] getMethods()</code></li>
<li><code>Method getMethod(String name, 类&lt;?&gt;... parameterTypes)</code></li>
<li><code>Method[] getDeclareMethods()</code></li>
<li><code>Method getDeclareMethod(String name, 类&lt;?&gt;... parameterTypes)</code></li>
</ul>
<p><code>Method</code>：方法对象</p>
<ul>
<li>执行方法：<code>Object invoke(Objcet obj, Object... args)</code></li>
<li>获取方法名称：<code>String getName()</code></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> cn.itcast.domian.Person;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Constructor;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectDemo4</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="type">Class</span> <span class="variable">personClass</span> <span class="operator">=</span> Person.class;</span><br><span class="line">    <span class="type">Person</span> <span class="variable">p</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Person</span>();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 获取成员变量</span></span><br><span class="line">    System.out.println(<span class="string">&quot;========getMethods========&quot;</span>);</span><br><span class="line">    Method[] methods = personClass.getMethods();</span><br><span class="line">    <span class="keyword">for</span>(Method m: methods) &#123;</span><br><span class="line">      System.out.println(m);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;-----------------&quot;</span>);</span><br><span class="line">    <span class="type">Method</span> <span class="variable">eat_Method</span> <span class="operator">=</span> personClass.getMethod(<span class="string">&quot;eat&quot;</span>);</span><br><span class="line">    eat_Method.invoke(p);</span><br><span class="line"></span><br><span class="line">    <span class="type">Method</span> <span class="variable">eat_Method2</span> <span class="operator">=</span> personClass.getMethod(<span class="string">&quot;eat&quot;</span>, String.class);</span><br><span class="line">    eat_Method2.invoke(p,<span class="string">&quot;apple&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    System.out.println(<span class="string">&quot;=======getDeclareConstructors=========&quot;</span>);</span><br><span class="line">    System.out.println(<span class="string">&quot;省略。。&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/eff07486ade04e78a124f076ed0741d9~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p>
<h2 id="反射小应用"><a href="#反射小应用" class="headerlink" title="反射小应用"></a>反射小应用</h2><p>写一个“框架”，可以帮我们创造任意类的对象，并执行其中任意方法。</p>
<p><strong>实现：</strong></p>
<ul>
<li>配置文件</li>
<li>反射</li>
</ul>
<p><strong>步骤：</strong></p>
<ul>
<li>将需要创建的对象的全类名和需要执行的方法定义在配置文件中</li>
<li>在程序中加载读取配置文件</li>
<li>使用反射技术加载类进内存</li>
<li>创建对象</li>
<li>执行方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.reflect;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectTest</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, Exception &#123;</span><br><span class="line">    <span class="comment">// 可以帮我们创造任意类的对象，并执行其中任意方法</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">// 1. 加载配置文件</span></span><br><span class="line">    <span class="comment">// 1.1 创建 Properties 对象</span></span><br><span class="line">    <span class="type">Properties</span> <span class="variable">pro</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Properties</span>();</span><br><span class="line">    <span class="comment">// 1.2 加载配置文件， 转换成一个集合</span></span><br><span class="line">    <span class="type">ClassLoader</span> <span class="variable">classLoader</span> <span class="operator">=</span> ReflectTest.class.getClassLoader();</span><br><span class="line">    <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> classLoader.getResourceAsStream(<span class="string">&quot;pro.properties&quot;</span>);</span><br><span class="line">    pro.load(is);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 获取配置文件中的定义数据</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> pro.getProperty(<span class="string">&quot;className&quot;</span>);</span><br><span class="line">    <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> pro.getProperty(<span class="string">&quot;methodName&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 加载该类进内存</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(className);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4.创建对象</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> cls.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5. 获取方法对象</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> cls.getMethod(methodName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6. 执行方法</span></span><br><span class="line">    method.invoke(obj);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/bfadd2b295654f5384fb6186b1266a2e~tplv-k3u1fbpfcp-watermark.image" alt="image.png">
    </p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/12/Java%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/12/Java%E4%B8%AD%E7%9A%84%E6%B3%A8%E8%A7%A3/" class="post-title-link" itemprop="url">Java中的注解</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-12 17:06:13" itemprop="dateCreated datePublished" datetime="2021-11-12T17:06:13+08:00">2021-11-12</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:55" itemprop="dateModified" datetime="2023-05-07T17:47:55+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h2><p><strong>概念：</strong> 注解，也叫元数据。JDK1.5后提出的新特性，用于描述新特性。使用注解：<code>@注解名称</code></p>
<p><strong>作用分类：</strong></p>
<ul>
<li><p>编写文档：通过代码里标识的注解生成文档</p>
</li>
<li><p>代码分析：通过代码里的标识的注解对代码进行分析【使用反射】</p>
</li>
<li><p>编译检查：通过代码里标识的注解让编译器能够实现基本的编译检查</p>
</li>
</ul>
<h2 id="jdk预定义的注解"><a href="#jdk预定义的注解" class="headerlink" title="jdk预定义的注解"></a>jdk预定义的注解</h2><ul>
<li>@Deprecated 已过期，表示方法是不被建议使用的</li>
<li>@Override 重写，标识覆盖它的父类的方法</li>
<li>@SuppressWarnings 压制警告，抑制警告</li>
</ul>
<p><strong>Deprecated 注解</strong></p>
<p>可以修饰类、方法、变量，在java源码中被@Deprecated修饰的类、方法、变量等表示不建议使用的，可能会出现错误的，可能以后会被删除的类、方法等，如果现在使用，则在以后使用了这些类、方法的程序在更新新的JDK、jar包等就会出错，不再提供支持。<br>个人程序中的类、方法、变量用@Deprecated修饰同样是不希望自己和别人在以后的时间再次使用此类、方法。当编译器编译时遇到了使用@Deprecated修饰的类、方法、变量时会提示相应的警告信息。</p>
<p><strong>Override 注解</strong></p>
<p>指明被注解的方法需要覆写超类中的方法，如果某个方法使用了该注解，却没有覆写超类中的方法(如大小写写错了，或者参数错了，或者是子类自己定义的方法)，编译器就会生成一个错误。<br>在子类中重写父类或接口的方法，@Overide并不是必须的。但是还是建议使用这个注解，在某些情况下，假设你修改了父类的方法的名字，那么之前重写的子类方法将不再属于重写，如果没有@Overide，你将不会察觉到这个子类的方法。有了这个注解修饰，编译器则会提示你这些信息。</p>
<p><strong>Suppresswarnings 注解</strong></p>
<p>@SuppressWarnings用来抑制编译器生成警告信息，可以修饰的元素为类，方法，方法参数，属性，局部变量。它可以达到抑制编译器编译时产生警告的目的，使用@SuppressWarnings注解，采用就近原则，比如一个方法出现警告，尽量使用@SuppressWarnings注解这个方法，而不是注解方法所在的类。所属范围越小越好，因为范围大了，不利于发现该类下其他方法的警告信息。<br>但是很不建议使用@SuppressWarnings注解，使用此注解，开发人员看不到编译时编译器提示的相应的警告，不能选择更好、更新的类、方法或者不能编写更规范的编码。同时后期更新JDK、jar包等源码时，使用@SuppressWarnings注解的代码可能受新的JDK、jar包代码的支持，出现错误，仍然需要修改。</p>
<h2 id="自己定义注解"><a href="#自己定义注解" class="headerlink" title="自己定义注解"></a>自己定义注解</h2><p><strong>格式：</strong> <code>public @interface 名称</code></p>
<p><strong>本质：</strong> 就是一个接口，默认继承<code>Annotation</code>接口</p>
<ul>
<li><code>public interface MyAnno extends java.lang.annotation.Annotation &#123;&#125;</code></li>
</ul>
<p><strong>属性：</strong> 接口中的抽象方法，有如下要求：</p>
<ul>
<li>属性的返回值类型<ul>
<li>基本数据类型</li>
<li>字符串 <code>String</code></li>
<li>枚举</li>
<li>注解</li>
<li>以上类型的数组</li>
</ul>
</li>
<li>定义了属性，在使用时需要给属性赋值<ul>
<li>可以使用<code>default</code>初始化默认值</li>
<li>如果只有一个属性需要赋值，并且属性的名称是<code>value</code>可以直接写值</li>
<li>数组赋值时，使用大括号。如果数组中只有一个值，大括号可以省略</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MyAnno &#123;</span><br><span class="line">  <span class="type">int</span> <span class="title function_">show1</span><span class="params">()</span>;</span><br><span class="line">  String <span class="title function_">show2</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  Person <span class="title function_">per</span><span class="params">()</span>;</span><br><span class="line">  MyAnno2 <span class="title function_">anno2</span><span class="params">()</span>;</span><br><span class="line"></span><br><span class="line">  String[] strs();</span><br><span class="line">  <span class="type">int</span> <span class="title function_">age</span><span class="params">()</span>;</span><br><span class="line">  String <span class="title function_">name</span><span class="params">()</span> <span class="keyword">default</span> <span class="string">&quot;wk&quot;</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.annotation;</span><br><span class="line"></span><br><span class="line"><span class="meta">@MyAnno(age=12, name=&quot;cy&quot;, ...)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Worker</span> &#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>元注解：</strong> 用于描述注解的注解</p>
<ul>
<li><code>@Target</code>：描述注解能够作用的位置<ul>
<li><code>ElemenType.TYPE</code>：类</li>
<li><code>ElemenType.METHOD</code>：方法</li>
<li><code>ElemenType.FIELD</code>：成员变量上</li>
</ul>
</li>
<li><code>@Retention</code>：描述注解被保留的阶段<ul>
<li><code>@Retention(value=&#123;RetentionPolicy.RUNTIME&#125;)</code>：当前被描述的注解，会保留到class字节码文件中，并被JVM读取到</li>
</ul>
</li>
<li><code>@Documented</code>：描述注解是否被抽取到api文档</li>
<li><code>@Inherited</code>：描述注解是否被子类继承</li>
</ul>
<h2 id="在程序中使用注解"><a href="#在程序中使用注解" class="headerlink" title="在程序中使用注解"></a>在程序中使用注解</h2><p>配合反射进行一个小测试</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.ElementType;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Retention;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.RetentionPolicy;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Target;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 描述需要去执行的类名和方法名</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Target(&#123;ElementType.TYPE&#125;)</span></span><br><span class="line"><span class="meta">@Retention(RetentionPolicy.RUNTIME)</span></span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> Pro &#123;</span><br><span class="line">  String <span class="title function_">className</span><span class="params">()</span>;</span><br><span class="line">  String <span class="title function_">methodName</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> cn.itcast.annotation;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"><span class="keyword">import</span> java.lang.annotation.Annotation;</span><br><span class="line"><span class="keyword">import</span> java.lang.reflect.Method;</span><br><span class="line"><span class="keyword">import</span> java.util.Properties;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Pro(className = &quot;cn.itcast.annotation.Demo1&quot;, methodName = &quot;show&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ReflectTest</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception &#123;</span><br><span class="line">    <span class="comment">// 1. 解析注解</span></span><br><span class="line">    <span class="comment">// 1.1 获取该类的字节码文件</span></span><br><span class="line">    Class&lt;ReflectTest&gt; reflectTestClass = ReflectTest.class;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 2. 获取上边的注解对象</span></span><br><span class="line">    <span class="type">Pro</span> <span class="variable">an</span> <span class="operator">=</span> reflectTestClass.getAnnotation(Pro.class);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 3. 调用注解中的抽象方法，获取返回值</span></span><br><span class="line">    <span class="type">String</span> <span class="variable">className</span> <span class="operator">=</span> an.className();</span><br><span class="line">    <span class="type">String</span> <span class="variable">methodName</span> <span class="operator">=</span> an.methodName();</span><br><span class="line">    System.out.println(className);</span><br><span class="line">    System.out.println(methodName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 4. 加载该类进内存</span></span><br><span class="line">    <span class="type">Class</span> <span class="variable">cls</span> <span class="operator">=</span> Class.forName(className);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 5.创建对象</span></span><br><span class="line">    <span class="type">Object</span> <span class="variable">obj</span> <span class="operator">=</span> cls.newInstance();</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 6. 获取方法对象</span></span><br><span class="line">    <span class="type">Method</span> <span class="variable">method</span> <span class="operator">=</span> cls.getMethod(methodName);</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 7. 执行方法</span></span><br><span class="line">    method.invoke(obj);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>




























      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/10/Java%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/10/Java%E4%B8%AD%E7%9A%84%E6%B3%9B%E5%9E%8B/" class="post-title-link" itemprop="url">Java中的泛型</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-10 17:06:13" itemprop="dateCreated datePublished" datetime="2021-11-10T17:06:13+08:00">2021-11-10</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:51" itemprop="dateModified" datetime="2023-05-07T17:47:51+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1-为什么使用泛型"><a href="#1-为什么使用泛型" class="headerlink" title="1. 为什么使用泛型"></a>1. 为什么使用泛型</h2><p>泛型程序设计意味着编写的代码可以对多种不同类型的对象重用。</p>
<h3 id="1-1-类型参数"><a href="#1-1-类型参数" class="headerlink" title="1.1 类型参数"></a>1.1 类型参数</h3><p>在Java添加泛型类型之前，泛型程序设计是使用继承实现的。<code>ArrayList</code>类只维护一个<code>Object</code>引用的数组：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ArrayList</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> Object[] elementData;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> Object <span class="title function_">get</span><span class="params">(<span class="type">int</span> i)</span> &#123;...&#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">add</span><span class="params">(Object o)</span> &#123;...&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>存在问题：</p>
<ul>
<li>获取一个值时，必须进行强制类型转换</li>
<li>没有错误坚持，可以向数组列表添加任何类的值</li>
</ul>
<p>泛型的解决方案：类型参数，指示元素类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ArrayList&lt;String&gt; files = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;String&gt;();</span><br></pre></td></tr></table></figure>

<ul>
<li>使用<code>get</code>时不需要进行强制类型转换</li>
<li>使用<code>add</code>方法时必须插入指定类型的参数</li>
<li>程序更加易读，也更加安全</li>
</ul>
<h2 id="2-泛型类"><a href="#2-泛型类" class="headerlink" title="2. 泛型类"></a>2. 泛型类</h2><p>泛型类就是有一个或多个类型变量的类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T&gt; &#123;</span><br><span class="line">  <span class="keyword">private</span> T first;</span><br><span class="line">  <span class="keyword">private</span> T second;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">()</span> &#123;</span><br><span class="line">    first = <span class="literal">null</span>;</span><br><span class="line">    second = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(T first, T second)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.first = first;</span><br><span class="line">    <span class="built_in">this</span>.second = second;</span><br><span class="line">  &#125;</span><br><span class="line">  </span><br><span class="line">  <span class="keyword">public</span> T <span class="title function_">getFirst</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> first;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> T <span class="title function_">getSecond</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> second;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFirst</span><span class="params">(T newValue)</span> &#123;</span><br><span class="line">    first = newValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">pairTest</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">    String[] words = &#123; <span class="string">&quot;Mary&quot;</span>, <span class="string">&quot;had&quot;</span>, <span class="string">&quot;a&quot;</span>, <span class="string">&quot;little&quot;</span>, <span class="string">&quot;lamb&quot;</span> &#125;;</span><br><span class="line">    Pair&lt;String&gt; mm = ArrayAlg.minmax(words);</span><br><span class="line">    System.out.println(<span class="string">&quot;min = &quot;</span> + mm.getFirst());</span><br><span class="line">    System.out.println(<span class="string">&quot;max = &quot;</span> + mm.getSecond());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayAlg</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> Pair&lt;String&gt; <span class="title function_">minmax</span><span class="params">(String[] a)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(a == <span class="literal">null</span> || a.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">String</span> <span class="variable">min</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="type">String</span> <span class="variable">max</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span> (min.compareTo(a[i]) &gt; <span class="number">0</span>) min = a[i];</span><br><span class="line">      <span class="keyword">if</span> (min.compareTo(a[i]) &lt; <span class="number">0</span>) max = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">Pair</span>&lt;&gt;(min, max);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>泛型类也可以有多个类型变量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span>&lt;T, U&gt; &#123;...&#125;</span><br></pre></td></tr></table></figure>



<h2 id="3-泛型方法"><a href="#3-泛型方法" class="headerlink" title="3. 泛型方法"></a>3. 泛型方法</h2><p>不但可以定义泛型类，还可以定义泛型方法。</p>
<ul>
<li>类型变量放在修饰符的后面，返回类型的前面</li>
<li>泛型方法可以在普通类中定义，也可以在泛型类中定义</li>
<li>当调用一个泛型方法时，可以把具体类型包围在尖括号中，放在方法名前</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayAlg</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">getMiddle</span><span class="params">(T... a)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> a[a.length / <span class="number">2</span>];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="4-类型变量的限定"><a href="#4-类型变量的限定" class="headerlink" title="4. 类型变量的限定"></a>4. 类型变量的限定</h2><p>有时，类或方法需要对类型变量加以约束。比如：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayAlg</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; T <span class="title function_">min</span><span class="params">(T[] a)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(a == <span class="literal">null</span> || a.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">T</span> <span class="variable">smallest</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span>(smallest.compareTo(a[i]) &gt; <span class="number">0</span>) smallest = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> smallest;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里计算最新需要<code>T</code>拥有一个<code>Comparable</code>接口，我们可以对其加一个限定来实现：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">ArrayAlg</span> &#123;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> &lt;T <span class="keyword">extends</span> <span class="title class_">Comparable</span>&gt; T <span class="title function_">min</span><span class="params">(T[] a)</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(a == <span class="literal">null</span> || a.length == <span class="number">0</span>) <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    <span class="type">T</span> <span class="variable">smallest</span> <span class="operator">=</span> a[<span class="number">0</span>];</span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">1</span>; i &lt; a.length; i++) &#123;</span><br><span class="line">      <span class="keyword">if</span>(smallest.compareTo(a[i]) &gt; <span class="number">0</span>) smallest = a[i];</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> smallest;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这样<code>min</code>方法只能在实现了<code>Compareable</code>接口的类的数组上调用。</p>
<p>为什么使用<code>extends</code>而不是<code>implements</code>？</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;T <span class="keyword">extends</span> <span class="title class_">BoundingType</span>&gt;</span><br></pre></td></tr></table></figure>

<p>表示<code>T</code>是限定类型的子类型。<code>T</code>和限定类型都可以是类，也可以是接口。选择<code>extends</code>是因为它更接近子类型的概念。</p>
<ul>
<li>类型变量用逗号分隔</li>
<li>限定符号用<code>&amp;</code>分隔</li>
</ul>
<h2 id="5-泛型代码和虚拟机"><a href="#5-泛型代码和虚拟机" class="headerlink" title="5. 泛型代码和虚拟机"></a>5. 泛型代码和虚拟机</h2><p>虚拟机没有泛型类型对象——所有对象都属于普通类。接下来我们来学习编译器是如何“擦除”类型参数，以及这个过程对Java会产生什么影响。</p>
<h3 id="5-1-类型擦除"><a href="#5-1-类型擦除" class="headerlink" title="5.1 类型擦除"></a>5.1 类型擦除</h3><p>无论何时定义一个泛型类型，都会自动提供一个相应的<strong>原始类型</strong>。</p>
<ul>
<li>这个原始类型的名字就是去掉类型参数后的泛型类型名。</li>
<li>类型变量会被擦除</li>
<li>替换为其限定类（对于无限定类的会替换为Object）</li>
</ul>
<p>看上面的<code>Pair</code>类，因为没有限定类型，会被替换成<code>Object</code></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> generic;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Pair</span> &#123;</span><br><span class="line">  <span class="keyword">private</span> Object first;</span><br><span class="line">  <span class="keyword">private</span> Object second;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">()</span> &#123;</span><br><span class="line">    first = <span class="literal">null</span>;</span><br><span class="line">    second = <span class="literal">null</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> <span class="title function_">Pair</span><span class="params">(Object first, Object second)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.first = first;</span><br><span class="line">    <span class="built_in">this</span>.second = second;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">getFirst</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> first;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">public</span> Object <span class="title function_">getSecond</span><span class="params">()</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> second;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setFirst</span><span class="params">(Object newValue)</span> &#123;</span><br><span class="line">    first = newValue;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="5-2-转换泛型表达式"><a href="#5-2-转换泛型表达式" class="headerlink" title="5.2 转换泛型表达式"></a>5.2 转换泛型表达式</h3><p>编写一个泛型方法或泛型字段调用时，如果擦除了返回类型，编译器会插入强制类型转换。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Pair&lt;Employee&gt; buddies = ...;</span><br><span class="line"><span class="type">Employee</span> <span class="variable">buddy</span> <span class="operator">=</span> buddies.getFirst();</span><br></pre></td></tr></table></figure>

<p><code>getFirst</code>擦除类型后返回的是<code>Object</code>，编译器自动插入转换到<code>Employee</code>的强制类型转换。</p>
<ul>
<li>对原始<code>Pair.getFirst</code>方法进行调用</li>
<li>将返回的<code>Object</code>类型强制转换为<code>Employee</code>类型</li>
</ul>
<h2 id="5-3-转换泛型方法"><a href="#5-3-转换泛型方法" class="headerlink" title="5.3 转换泛型方法"></a>5.3 转换泛型方法</h2><p>类型擦除也会发生在泛型方法中。<strong>这里注意使用了桥方法保证多态。</strong></p>
<h2 id="6-限制与局限性"><a href="#6-限制与局限性" class="headerlink" title="6. 限制与局限性"></a>6. 限制与局限性</h2><p>下面来看以下使用Java泛型时需要考虑的一些限制。</p>
<h3 id="6-1-不能用基本类型代替参数类型"><a href="#6-1-不能用基本类型代替参数类型" class="headerlink" title="6.1 不能用基本类型代替参数类型"></a>6.1 不能用基本类型代替参数类型</h3><p>因为原型擦除后，会含有<code>Object</code>字段，而这个字段无法存储基本类型</p>
<h3 id="6-2-运行时类型查询只适用于原始类型"><a href="#6-2-运行时类型查询只适用于原始类型" class="headerlink" title="6.2 运行时类型查询只适用于原始类型"></a>6.2 运行时类型查询只适用于原始类型</h3><p>虚拟机中的对象总有一个特定的泛型类型。因此所有的类型查询只产生原始类型。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(a <span class="keyword">instanceof</span> Pair&lt;String&gt;); <span class="comment">// Error</span></span><br><span class="line"><span class="keyword">if</span>(a <span class="keyword">instanceof</span> Pair&lt;T&gt;); <span class="comment">// Error</span></span><br><span class="line">Pair&lt;String&gt; p = (Pair&lt;String&gt;) a; <span class="comment">//Error</span></span><br></pre></td></tr></table></figure>

<h3 id="6-3-不能创建参数化类型的数组"><a href="#6-3-不能创建参数化类型的数组" class="headerlink" title="6.3 不能创建参数化类型的数组"></a>6.3 不能创建参数化类型的数组</h3><p>数组会记住它的元素类型，如果试图存储其他类型的元素，会抛出错误。</p>
<h3 id="6-4-Varargs警告"><a href="#6-4-Varargs警告" class="headerlink" title="6.4 Varargs警告"></a>6.4 Varargs警告</h3><h3 id="6-5-不能实例化类型变量"><a href="#6-5-不能实例化类型变量" class="headerlink" title="6.5 不能实例化类型变量"></a>6.5 不能实例化类型变量</h3><h3 id="6-6-不能构造泛型数组"><a href="#6-6-不能构造泛型数组" class="headerlink" title="6.6 不能构造泛型数组"></a>6.6 不能构造泛型数组</h3><h3 id="6-7-泛型类的静态上下文中类型变量无效"><a href="#6-7-泛型类的静态上下文中类型变量无效" class="headerlink" title="6.7 泛型类的静态上下文中类型变量无效"></a>6.7 泛型类的静态上下文中类型变量无效</h3><h3 id="6-8-不能抛出或捕获泛型类的实例"><a href="#6-8-不能抛出或捕获泛型类的实例" class="headerlink" title="6.8 不能抛出或捕获泛型类的实例"></a>6.8 不能抛出或捕获泛型类的实例</h3><h3 id="6-9-可以取消对检查类型异常的检查"><a href="#6-9-可以取消对检查类型异常的检查" class="headerlink" title="6.9 可以取消对检查类型异常的检查"></a>6.9 可以取消对检查类型异常的检查</h3><h3 id="6-10-擦除后的冲突"><a href="#6-10-擦除后的冲突" class="headerlink" title="6.10 擦除后的冲突"></a>6.10 擦除后的冲突</h3><h2 id="7-泛型类的继承规则"><a href="#7-泛型类的继承规则" class="headerlink" title="7. 泛型类的继承规则"></a>7. 泛型类的继承规则</h2><h2 id="8-通配符类型"><a href="#8-通配符类型" class="headerlink" title="8. 通配符类型"></a>8. 通配符类型</h2><h2 id="9-反射和泛型"><a href="#9-反射和泛型" class="headerlink" title="9. 反射和泛型"></a>9. 反射和泛型</h2>
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/08/Java%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%B1%BB/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/08/Java%E4%B8%AD%E7%9A%84%E5%AF%B9%E8%B1%A1%E4%B8%8E%E7%B1%BB/" class="post-title-link" itemprop="url">Java中的对象与类</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-08 17:06:13" itemprop="dateCreated datePublished" datetime="2021-11-08T17:06:13+08:00">2021-11-08</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:35" itemprop="dateModified" datetime="2023-05-07T17:47:35+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="1-面向的对象程序设计概述"><a href="#1-面向的对象程序设计概述" class="headerlink" title="1. 面向的对象程序设计概述"></a>1. 面向的对象程序设计概述</h2><h3 id="1-1-类"><a href="#1-1-类" class="headerlink" title="1.1 类"></a>1.1 类</h3><p><strong>定义：</strong>类是构造对象的模板或蓝图。由类构造对象的过程称为创建类的实例。</p>
<p><strong>封装：</strong>是处理对象的一个重要概念。从行为上来看封装就是将数据和行为组合在一个包中，并对对象的使用者隐藏具体的实现方法。</p>
<ul>
<li>其中对象的数据称为<strong>实例字段</strong></li>
<li>操作数据的过程称为<strong>方法</strong></li>
</ul>
<p><strong>继承：</strong>通过扩展一个类来建立另一个类的过程称为继承</p>
<h3 id="1-2-对象"><a href="#1-2-对象" class="headerlink" title="1.2 对象"></a>1.2 对象</h3><ul>
<li>同一个类的所有对象实例，由于支持相同的行为而具有家族式的<strong>相似性</strong>。</li>
<li>每个对象都保存着当前描述当前状况的信息，这就是对象的<strong>状态</strong>。<ul>
<li>对象的状态可能会随时间发生改变，但不是自发的</li>
<li>对象状态的改变必须通过调用方法实现</li>
</ul>
</li>
<li>每一个对象都有一个唯一的标识。作为同一个类的实例，每个对象的标识总是不同的，状态往往也存在着差异。</li>
</ul>
<h3 id="1-3-类之间的关系"><a href="#1-3-类之间的关系" class="headerlink" title="1.3 类之间的关系"></a>1.3 类之间的关系</h3><p>类之间最常见的关系有：</p>
<ul>
<li>依赖（“uses-a”）</li>
<li>聚合（“has-a”）</li>
<li>继承（“is-a”）</li>
</ul>
<h2 id="2-自定义类"><a href="#2-自定义类" class="headerlink" title="2. 自定义类"></a>2. 自定义类</h2><p>类 &#x3D; 构造器 + 实例字段 + 方法</p>
<h3 id="2-1-构造器"><a href="#2-1-构造器" class="headerlink" title="2.1 构造器"></a>2.1 构造器</h3><ul>
<li>构造器与类同名</li>
<li>每个类可以有一个以上的构造器</li>
<li>构造器可以有0个、1个或多个参数</li>
<li>构造器没有返回值</li>
<li>构造器总是伴随着new操作符一起调用</li>
</ul>
<p><strong>1. 重载</strong></p>
<p>一个类可以有多个构造器，这种功能叫做重载。编译器必须挑出具体的方法：</p>
<ul>
<li>如果匹配不到适合的参数，就会编译错误</li>
<li>如果找到合适的，就会调用该构造器</li>
</ul>
<p><strong>2. 默认字段初始化</strong></p>
<p>如果构造器中没有显示地为字段设置初始值，那么就会被自动的赋为默认值：</p>
<ul>
<li>数值：0</li>
<li>布尔值：false</li>
<li>对象：null</li>
</ul>
<p><strong>3. 无参数的构造器</strong></p>
<p>很多类都会包含一个无参数构造器，又无参数构造器创建对象时，对象状态会置为适当的默认值</p>
<ul>
<li>如果一个类没有编写构造器，则会默认提供一个无参数构造器</li>
<li>如果一个类提供了一个构造器（不是无参数构造器），那么构造对象时如果不提供参数就会报错</li>
</ul>
<p><strong>4. 初始化数据字段</strong></p>
<ul>
<li>构造器中设置</li>
<li>声明中设置</li>
<li>使用初始化块</li>
</ul>
<h3 id="2-2-隐式参数与显示参数"><a href="#2-2-隐式参数与显示参数" class="headerlink" title="2.2 隐式参数与显示参数"></a>2.2 隐式参数与显示参数</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">double</span> salary</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">raiseSalary</span><span class="params">(<span class="type">double</span> byPercent)</span> &#123;</span><br><span class="line">        <span class="type">double</span> <span class="variable">raise</span> <span class="operator">=</span> salary * byPercent / <span class="number">100</span>;</span><br><span class="line">        salary += raise</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>当我们调用这个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">Employee</span> <span class="variable">number007</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Employee</span>(<span class="number">1000</span>)</span><br><span class="line">number007.raiseSalary(<span class="number">5</span>)</span><br></pre></td></tr></table></figure>

<p>其实执行的具体过程如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">double</span> <span class="variable">raise</span> <span class="operator">=</span> number007.salary * byPercent / <span class="number">100</span>;</span><br><span class="line">number007.salary += raise</span><br></pre></td></tr></table></figure>

<p><code>raiseSalary</code>有两个参数：</p>
<ul>
<li><p>隐式参数，就是这里的<code>number007</code>。关键字this可以指向隐式参数，因此这个方法可以这样写</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">raiseSalary</span><span class="params">(<span class="type">double</span> byPercent)</span> &#123;</span><br><span class="line">    <span class="type">double</span> <span class="variable">raise</span> <span class="operator">=</span> <span class="built_in">this</span>.salary * byPercent / <span class="number">100</span>;</span><br><span class="line">    <span class="built_in">this</span>.salary += raise</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>显示参数，跟在方法名后括号中的数值</p>
</li>
</ul>
<h3 id="2-3-基于类的访问权限"><a href="#2-3-基于类的访问权限" class="headerlink" title="2.3 基于类的访问权限"></a>2.3 基于类的访问权限</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String name</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Employee other)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> name.equals(other.name)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(harry.equals(boss)) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>因为<code>boss</code>是<code>Employee</code>类型的对象，而<code>Employee</code>类的方法可以访问任何<code>Employee</code>类型对象的私有字段</p>
<h3 id="2-4-私有方法"><a href="#2-4-私有方法" class="headerlink" title="2.4 私有方法"></a>2.4 私有方法</h3><p>大多数方法设计为公共的，但在一些情况下设计成私有的更有用：</p>
<ul>
<li>一个公共函数的辅助方法，不需要称为公共接口的一部分</li>
</ul>
<h3 id="2-5-final-实例字段"><a href="#2-5-final-实例字段" class="headerlink" title="2.5 final 实例字段"></a>2.5 final 实例字段</h3><p>定义为final的实例字段，必须确保在每一个构造器执行之后，这个字段已经被设置，并且以后不能修改这个字段</p>
<h2 id="3-静态字段和静态方法"><a href="#3-静态字段和静态方法" class="headerlink" title="3. 静态字段和静态方法"></a>3. 静态字段和静态方法</h2><p>接下来我们讨论<code>static</code>修饰符</p>
<h3 id="3-1-静态字段"><a href="#3-1-静态字段" class="headerlink" title="3.1 静态字段"></a>3.1 静态字段</h3><p>如果将一个字段定义为<code>static</code>，那么它将属于这个类：</p>
<ul>
<li>非静态的实例字段，每个对象都有一个自己的副本</li>
<li>静态字段只属于类，这个类的所有实例共享一个静态字段</li>
</ul>
<h3 id="3-2-静态常量"><a href="#3-2-静态常量" class="headerlink" title="3.2 静态常量"></a>3.2 静态常量</h3><p><code>Math</code>类中的<code>PI</code>就是一个静态常量</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Math</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="type">double</span> <span class="variable">PI</span> <span class="operator">=</span> <span class="number">3.1415926</span></span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里还添加了<code>final</code>防止其值被恶意修改</p>
<h3 id="3-3-静态方法"><a href="#3-3-静态方法" class="headerlink" title="3.3 静态方法"></a>3.3 静态方法</h3><p>静态方法不是在对象上执行的方法，如<code>Math.pow()</code>。</p>
<ul>
<li>可以认为静态方法是没有<code>this</code>参数的方法</li>
<li>静态方法不可以访问实例字段，但是可以访问静态字段</li>
</ul>
<p>以下两种场景适合使用静态方法：</p>
<ul>
<li>方法不需要访问对象的状态，所有的参数由显示参数提供</li>
<li>方法只需要访问类的静态字段</li>
</ul>
<h3 id="3-4-工厂方法"><a href="#3-4-工厂方法" class="headerlink" title="3.4 工厂方法"></a>3.4 工厂方法</h3><p>类似<code>LocalDate</code>和<code>NumberFormat</code>的类使用静态工厂方法来构造对象</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">NumberFormat</span> <span class="variable">currencyFormatter</span> <span class="operator">=</span> NumberFormat.getCurrencyInstance();</span><br><span class="line"><span class="type">NumberFormat</span> <span class="variable">precentFormatter</span> <span class="operator">=</span> NumberFormat.getPrecentInstance();</span><br><span class="line"><span class="type">double</span> <span class="variable">x</span> <span class="operator">=</span> <span class="number">0.1</span>;</span><br><span class="line">System.out.println(currencyFormatter.format(x)); <span class="comment">// $0.10</span></span><br><span class="line">System.out.println(precentFormatter.format(x)); <span class="comment">// 10%</span></span><br></pre></td></tr></table></figure>

<p>这里没有采用构造器有如下原因：</p>
<ul>
<li>构造器必须与类名相同，但是这里希望两个不同的名字，分别得到货币的实例和百分比</li>
<li>使用构造器时无法改变构造对象的类型。而工厂方法实际上将返回<code>DecimalFormat</code>类的对象，这是<code>NumberFormat</code>的子类。</li>
</ul>
<h3 id="3-5-main方法"><a href="#3-5-main方法" class="headerlink" title="3.5 main方法"></a>3.5 main方法</h3><p><code>main</code>是一个静态方法，<code>main</code>不对任何对象进行操作。</p>
<ul>
<li>每一个类都可以有一个<code>main</code>方法，可以以此进行单元测试</li>
</ul>
<h2 id="4-方法参数"><a href="#4-方法参数" class="headerlink" title="4. 方法参数"></a>4. 方法参数</h2><p>Java程序设计总是按值调用，和js一样，不再赘述。</p>
<h2 id="5-包"><a href="#5-包" class="headerlink" title="5. 包"></a>5. 包</h2><p>包可以将类组织在一个集合中，能够帮助我们方便的组织自己的代码，并将自己的代码和别人提供的代码库分开管理。</p>
<h3 id="5-1-类的导入"><a href="#5-1-类的导入" class="headerlink" title="5.1 类的导入"></a>5.1 类的导入</h3><p>一个类可以使用所属包中的所有类，以及其他包中的公共类</p>
<p>访问公共类的两种方式：</p>
<ul>
<li><p>使用完全限定名</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">java.time.<span class="type">LocalDate</span> <span class="variable">today</span> <span class="operator">=</span> java.time.LocalDate.now();</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用<code>import</code>语句</p>
<ul>
<li><p>引入全部的包（注意使用*只能导入一个包）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.*;</span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">today</span> <span class="operator">=</span> LocalDate.now();</span><br></pre></td></tr></table></figure>
</li>
<li><p>引入特定的类</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.time.LocalDate;</span><br><span class="line"><span class="type">LocalDate</span> <span class="variable">today</span> <span class="operator">=</span> LocalDate.now();</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
<h3 id="5-2-静态导入"><a href="#5-2-静态导入" class="headerlink" title="5.2 静态导入"></a>5.2 静态导入</h3><ul>
<li><p>导入静态字段和方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.*;</span><br><span class="line"></span><br><span class="line">out.println(<span class="string">&quot;hello world&quot;</span>)</span><br></pre></td></tr></table></figure>
</li>
<li><p>导入特定静态字段和方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> java.lang.System.out;</span><br><span class="line"></span><br><span class="line">out.println(<span class="string">&quot;hello world&quot;</span>)</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="5-3-在包中添加类"><a href="#5-3-在包中添加类" class="headerlink" title="5.3 在包中添加类"></a>5.3 在包中添加类</h3><p>使用<code>package</code>将类放入包中</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> com.horstman.corejava;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Employee</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果没有在开头使用<code>package</code>，这个源文件中的类就属于<strong>无名包</strong></p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/06/go%E7%9A%84%E6%96%B9%E6%B3%95/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/06/go%E7%9A%84%E6%96%B9%E6%B3%95/" class="post-title-link" itemprop="url">go的数据结构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-06 17:06:13" itemprop="dateCreated datePublished" datetime="2021-11-06T17:06:13+08:00">2021-11-06</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:01" itemprop="dateModified" datetime="2023-05-07T17:47:01+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="方法"><a href="#方法" class="headerlink" title="方法"></a>方法</h2><p><strong>方法的声明：</strong> 在函数声明时，在其名字之前放上一个变量，即是一个方法。这个附加的参数会将该函数附加到这种类型上，即相当于为这种类型定义了一个独占的方法。</p>
<p>下面的代码里那个附加的参数p，叫做方法的接收器（receiver）</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> geometry</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;math&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Point <span class="keyword">struct</span>&#123; X, Y <span class="type">float64</span> &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// traditional function</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">Distance</span><span class="params">(p, q Point)</span></span> <span class="type">float64</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> math.Hypot(q.X-p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// same thing, but as a method of the Point type</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p Point)</span></span> Distance(q Point) <span class="type">float64</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> math.Hypot(q.X-p.X, q.Y-p.Y)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>方法的调用：</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p := Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">q := Point&#123;<span class="number">4</span>, <span class="number">6</span>&#125;</span><br><span class="line">fmt.Println(Distance(p, q)) <span class="comment">// &quot;5&quot;, function call</span></span><br><span class="line">fmt.Println(p.Distance(q))  <span class="comment">// &quot;5&quot;, method call</span></span><br></pre></td></tr></table></figure>



<h2 id="基于指针对象的方法"><a href="#基于指针对象的方法" class="headerlink" title="基于指针对象的方法"></a>基于指针对象的方法</h2><p>我们就可以用其指针而不是对象来声明方法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(p *Point)</span></span> ScaleBy(factor <span class="type">float64</span>) &#123;</span><br><span class="line">    p.X *= factor</span><br><span class="line">    p.Y *= factor</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在声明方法时，如果一个类型名本身是一个指针的话，是不允许其出现在接收器中的</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> P *<span class="type">int</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="params">(P)</span></span> f() &#123; <span class="comment">/* ... */</span> &#125; <span class="comment">// compile error: invalid receiver type</span></span><br></pre></td></tr></table></figure>

<p>调用指针类型方法<code>(*Point).ScaleBy</code>，只要提供一个Point类型的指针即可</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// plan1</span></span><br><span class="line">r := &amp;Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">r.ScaleBy(<span class="number">2</span>)</span><br><span class="line">fmt.Println(*r) <span class="comment">// &quot;&#123;2, 4&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// plan2</span></span><br><span class="line">p := Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">pptr := &amp;p</span><br><span class="line">pptr.ScaleBy(<span class="number">2</span>)</span><br><span class="line">fmt.Println(p) <span class="comment">// &quot;&#123;2, 4&#125;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//plan3</span></span><br><span class="line">p := Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">(&amp;p).ScaleBy(<span class="number">2</span>)</span><br><span class="line">fmt.Println(p) <span class="comment">// &quot;&#123;2, 4&#125;&quot;</span></span><br></pre></td></tr></table></figure>

<p>不过后面两种方法有些笨拙。幸运的是，go语言本身在这种地方会帮到我们。如果接收器p是一个Point类型的变量，并且其方法需要一个Point指针作为接收器，我们可以用下面这种简短的写法：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">p.ScaleBy(<span class="number">2</span>)</span><br></pre></td></tr></table></figure>

<p>编译器会隐式地帮我们用&amp;p去调用ScaleBy这个方法。这种简写方法只适用于“变量”，包括struct里的字段比如p.X，以及array和slice内的元素比如perim[0]。我们不能通过一个无法取到地址的接收器来调用指针方法，比如临时变量的内存地址就无法获取得到：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Point&#123;<span class="number">1</span>, <span class="number">2</span>&#125;.ScaleBy(<span class="number">2</span>) <span class="comment">// compile error: can&#x27;t take address of Point literal</span></span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/04/go%E7%9A%84%E5%87%BD%E6%95%B0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/04/go%E7%9A%84%E5%87%BD%E6%95%B0/" class="post-title-link" itemprop="url">go的数据结构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-04 17:06:13" itemprop="dateCreated datePublished" datetime="2021-11-04T17:06:13+08:00">2021-11-04</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:05" itemprop="dateModified" datetime="2023-05-07T17:47:05+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="函数声明"><a href="#函数声明" class="headerlink" title="函数声明"></a>函数声明</h2><p>函数声明包括<strong>函数名</strong>、<strong>形参</strong>、<strong>返回值</strong>和<strong>函数体</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">hypot</span><span class="params">(x, y <span class="type">float64</span>)</span></span> <span class="type">float64</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> math.Sqrt(x*x + y*y)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Println(hypot(<span class="number">3</span>,<span class="number">4</span>)) <span class="comment">// &quot;5&quot;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>形式参数列表描述了函数的参数名以及参数类型。这些参数作为局部变量，其值由参数调用者提供。</li>
<li>返回值列表描述了函数返回值的变量名以及类型。如果函数返回一个无名变量或者没有返回值，返回值列表的括号是可以省略的。</li>
</ul>
<p><strong>如果一组形参或返回值有相同的类型，我们不必为每个形参都写出参数类型。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i, j, k <span class="type">int</span>, s, t <span class="type">string</span>)</span></span>                 &#123; <span class="comment">/* ... */</span> &#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">f</span><span class="params">(i <span class="type">int</span>, j <span class="type">int</span>, k <span class="type">int</span>,  s <span class="type">string</span>, t <span class="type">string</span>)</span></span> &#123; <span class="comment">/* ... */</span> &#125;</span><br></pre></td></tr></table></figure>

<p><strong>返回值也可以像形式参数一样被命名。</strong> </p>
<ul>
<li>在这种情况下，每个返回值被声明成一个局部变量，并根据该返回值的类型，将其初始化为该类型的零值。 </li>
<li>如果一个函数在声明时，包含返回值列表，该函数必须以 return语句结尾，除非函数明显无法运行到结尾处。</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">add</span><span class="params">(x <span class="type">int</span>, y <span class="type">int</span>)</span></span> <span class="type">int</span>   &#123;<span class="keyword">return</span> x + y&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sub</span><span class="params">(x, y <span class="type">int</span>)</span></span> (z <span class="type">int</span>)   &#123; z = x - y; <span class="keyword">return</span>&#125;</span><br></pre></td></tr></table></figure>

<p>在函数体中，<strong>函数的形参作为局部变量，被初始化为调用者提供的值</strong>。函数的形参和有名返回值作为函数最外层的局部变量，被存储在相同的词法块中。</p>
<p><strong>实参通过值的方式传递，因此函数的形参是实参的拷贝。</strong> 对形参进行修改不会影响实参。但是，如果实参包括引用类型，如指针，slice(切片)、map、function、channel等类型，实参可能会由于函数的间接引用被修改。</p>
<h2 id="返回多个值"><a href="#返回多个值" class="headerlink" title="返回多个值"></a>返回多个值</h2><p><strong>在Go中，一个函数可以返回多个值。</strong> 许多标准库中的函数返回2个值，一个是期望得到的返回值，另一个是函数出错时的错误信息。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">findLinks</span><span class="params">(url <span class="type">string</span>)</span></span> ([]<span class="type">string</span>, <span class="type">error</span>) &#123;</span><br><span class="line">    resp, err := http.Get(url)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, err</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> resp.StatusCode != http.StatusOK &#123;</span><br><span class="line">        resp.Body.Close()</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;getting %s: %s&quot;</span>, url, resp.Status)</span><br><span class="line">    &#125;</span><br><span class="line">    doc, err := html.Parse(resp.Body)</span><br><span class="line">    resp.Body.Close()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span>, fmt.Errorf(<span class="string">&quot;parsing %s as HTML: %v&quot;</span>, url, err)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> visit(<span class="literal">nil</span>, doc), <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>调用多返回值函数时，返回给调用者的是一组值，调用者必须显式的将这些值分配给变量</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">links, err := findLinks(url)</span><br></pre></td></tr></table></figure>

<p><strong>如果某个值不被使用，可以将其分配给blank identifier</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">links, _ := findLinks(url) <span class="comment">// errors ignored</span></span><br></pre></td></tr></table></figure>

<p><strong>如果一个函数所有的返回值都有显式的变量名，那么该函数的return语句可以省略操作数。这称之为bare return。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CountWordsAndImages</span><span class="params">(url <span class="type">string</span>)</span></span> (words, images <span class="type">int</span>, err <span class="type">error</span>) &#123;</span><br><span class="line">    resp, err := http.Get(url)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    doc, err := html.Parse(resp.Body)</span><br><span class="line">    resp.Body.Close()</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        err = fmt.Errorf(<span class="string">&quot;parsing HTML: %s&quot;</span>, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    words, images = countWordsAndImages(doc)</span><br><span class="line">    <span class="keyword">return</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>按照返回值列表的次序，返回所有的返回值，在上面的例子中，每一个return语句等价于：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">return words, images, err</span><br></pre></td></tr></table></figure>



<h2 id="可变参数"><a href="#可变参数" class="headerlink" title="可变参数"></a>可变参数</h2><p>参数数量可变的函数称为可变参数函数。典型的例子就是fmt.Printf和类似函数。Printf首先接收一个必备的参数，之后接收任意个数的后续参数。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">sum</span><span class="params">(vals ...<span class="type">int</span>)</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    total := <span class="number">0</span></span><br><span class="line">    <span class="keyword">for</span> _, val := <span class="keyword">range</span> vals &#123;</span><br><span class="line">        total += val</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> total</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">fmt.Println(sum())           <span class="comment">// &quot;0&quot;</span></span><br><span class="line">fmt.Println(sum(<span class="number">3</span>))          <span class="comment">// &quot;3&quot;</span></span><br><span class="line">fmt.Println(sum(<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>)) <span class="comment">// &quot;10&quot;</span></span><br></pre></td></tr></table></figure>

<p>如果原始参数已经是切片类型，只需在最后一个参数后加上省略符。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">values := []<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>&#125;</span><br><span class="line">fmt.Println(sum(values...)) <span class="comment">// &quot;10&quot;</span></span><br></pre></td></tr></table></figure>



<h2 id="匿名函数"><a href="#匿名函数" class="headerlink" title="匿名函数"></a>匿名函数</h2><p>拥有函数名的函数只能在包级语法块中被声明，通过函数字面量（function literal），我们可绕过这一限制，在任何表达式中表示一个函数值。函数字面量的语法和函数声明相似，区别在于func关键字后没有函数名。函数值字面量是一种表达式，它的值被称为匿名函数（anonymous function）。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">strings.Map(<span class="function"><span class="keyword">func</span><span class="params">(r <span class="type">rune</span>)</span></span> <span class="type">rune</span> &#123; </span><br><span class="line">    <span class="keyword">return</span> r + <span class="number">1</span> </span><br><span class="line">&#125;, <span class="string">&quot;HAL-9000&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>在函数内部可以声明匿名函数，但不能声明一个正常的函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">a</span><span class="params">(data1 <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">   fmt.Println(data1)</span><br><span class="line">   b := <span class="function"><span class="keyword">func</span><span class="params">(data2 <span class="type">int</span>)</span></span> &#123;</span><br><span class="line">      fmt.Println(data2)</span><br><span class="line">   &#125;</span><br><span class="line">   b(<span class="number">3</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="闭包函数"><a href="#闭包函数" class="headerlink" title="闭包函数"></a>闭包函数</h2><p>通过这种方式定义的函数可以访问完整的词法环境（感觉类似js的闭包），这意味着在函数中定义的内部函数可以引用该函数的变量，如下例所示：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// squares返回一个匿名函数。</span></span><br><span class="line"><span class="comment">// 该匿名函数每次被调用时都会返回下一个数的平方。</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">squares</span><span class="params">()</span></span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> x <span class="type">int</span></span><br><span class="line">    <span class="keyword">return</span> <span class="function"><span class="keyword">func</span><span class="params">()</span></span> <span class="type">int</span> &#123;</span><br><span class="line">        x++</span><br><span class="line">        <span class="keyword">return</span> x * x</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    f := squares()</span><br><span class="line">    fmt.Println(f()) <span class="comment">// &quot;1&quot;</span></span><br><span class="line">    fmt.Println(f()) <span class="comment">// &quot;4&quot;</span></span><br><span class="line">    fmt.Println(f()) <span class="comment">// &quot;9&quot;</span></span><br><span class="line">    fmt.Println(f()) <span class="comment">// &quot;16&quot;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="自执行函数"><a href="#自执行函数" class="headerlink" title="自执行函数"></a>自执行函数</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="comment">// 自执行函数</span></span><br><span class="line">   (<span class="function"><span class="keyword">func</span><span class="params">()</span></span> &#123;</span><br><span class="line">      fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">   &#125;)()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Deferred函数"><a href="#Deferred函数" class="headerlink" title="Deferred函数"></a>Deferred函数</h2><p>延迟调用，即无论在哪，加了defer的函数会最后执行</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">defer</span> def1()</span><br><span class="line">   fmt.Println(<span class="string">&quot;1&quot;</span>)</span><br><span class="line">   fmt.Println(<span class="string">&quot;2&quot;</span>)</span><br><span class="line">   <span class="keyword">defer</span> def2()</span><br><span class="line">   fmt.Println(<span class="string">&quot;3&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">def1</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Println(<span class="string">&quot;i am defer1&quot;</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">def2</span><span class="params">()</span></span> &#123;</span><br><span class="line">   fmt.Println(<span class="string">&quot;i am defer2&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>最后输出结果：</p>
<ul>
<li>1</li>
<li>2</li>
<li>3</li>
<li>i am defer2</li>
<li>i am defer1</li>
<li></li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/11/01/go%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/11/01/go%E7%9A%84%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" class="post-title-link" itemprop="url">go的数据结构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-11-01 17:06:13" itemprop="dateCreated datePublished" datetime="2021-11-01T17:06:13+08:00">2021-11-01</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:10" itemprop="dateModified" datetime="2023-05-07T17:47:10+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="基础数据类型"><a href="#基础数据类型" class="headerlink" title="基础数据类型"></a>基础数据类型</h2><ul>
<li>整型</li>
<li>浮点数</li>
<li>复数</li>
<li>布尔值</li>
<li>字符串</li>
<li>常量</li>
</ul>
<h2 id="复合数据类型"><a href="#复合数据类型" class="headerlink" title="复合数据类型"></a>复合数据类型</h2><ul>
<li>数组</li>
<li>Slice</li>
<li>Map</li>
<li>结构体</li>
<li>JSON</li>
<li>文本和HTML模板</li>
</ul>
<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><p>数组是一个由固定长度的特定类型元素组成的序列，一个数组可以由零个或多个元素组成。</p>
<p>ps：因为数组的长度固定，因此Go语言中很少直接使用数组</p>
<p><strong>1. 数组的每个元素可以通过下标访问</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> a [<span class="number">3</span>]<span class="type">int</span>             <span class="comment">// array of 3 integers</span></span><br><span class="line">fmt.Println(a[<span class="number">0</span>])        <span class="comment">// print the first element</span></span><br><span class="line">fmt.Println(a[<span class="built_in">len</span>(a)<span class="number">-1</span>]) <span class="comment">// print the last element, a[2]</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// Print the indices and elements.</span></span><br><span class="line"><span class="keyword">for</span> i, v := <span class="keyword">range</span> a &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d %d\n&quot;</span>, i, v)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Print the elements only.</span></span><br><span class="line"><span class="keyword">for</span> _, v := <span class="keyword">range</span> a &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%d\n&quot;</span>, v)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p><strong>2. 数组的每个元素初始化为元素类型对应的零值</strong></p>
<p>可以使用数组面值语法用一组值初始化数组</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> q [<span class="number">3</span>]<span class="type">int</span> = [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line"><span class="keyword">var</span> r [<span class="number">3</span>]<span class="type">int</span> = [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">fmt.Println(r[<span class="number">2</span>]) <span class="comment">// &quot;0&quot;</span></span><br></pre></td></tr></table></figure>

<p>在数组字面值中，如果在数组的长度位置出现的是“…”省略号，则表示数组的长度是根据初始化值的个数来计算。因此，上面q数组的定义可以简化为</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">q := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%T\n&quot;</span>, q) <span class="comment">// &quot;[3]int&quot;</span></span><br></pre></td></tr></table></figure>

<p>定义了一个含有100个元素的数组r，最后一个元素被初始化为-1，其它元素都是用0初始化。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">r := [...]<span class="type">int</span>&#123;<span class="number">99</span>: <span class="number">-1</span>&#125;</span><br></pre></td></tr></table></figure>

<p>如果一个数组的元素类型是可以相互比较的，那么数组类型也是可以相互比较的，这时候我们可以直接通过&#x3D;&#x3D;比较运算符来比较两个数组，只有当两个数组的所有元素都是相等的时候数组才是相等的。不相等比较运算符!&#x3D;遵循同样的规则。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">a := [<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">b := [...]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">c := [<span class="number">2</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">3</span>&#125;</span><br><span class="line">fmt.Println(a == b, a == c, b == c) <span class="comment">// &quot;true false false&quot;</span></span><br><span class="line">d := [<span class="number">3</span>]<span class="type">int</span>&#123;<span class="number">1</span>, <span class="number">2</span>&#125;</span><br><span class="line">fmt.Println(a == d) <span class="comment">// compile error: cannot compare [2]int == [3]int</span></span><br></pre></td></tr></table></figure>



<h2 id="Slice"><a href="#Slice" class="headerlink" title="Slice"></a>Slice</h2><p>Slice（切片）代表变长的序列，序列中每个元素都有相同的类型。一个slice类型一般写作[]T，其中T代表slice中元素的类型；slice的语法和数组很像，只是没有固定长度而已。</p>
<ul>
<li>一个slice是一个轻量级的数据结构，提供了访问数组子序列（或者全部）元素的功能</li>
<li>一个slice由三个部分构成：指针、长度和容量。<ul>
<li>指针指向第一个slice元素对应的底层数组元素的地址，要注意的是slice的第一个元素并不一定就是数组的第一个元素</li>
<li>长度对应slice中元素的数目；长度不能超过容量，容量一般是从slice的开始位置到底层数据的结尾位置</li>
<li>内置的len和cap函数分别返回slice的长度和容量</li>
</ul>
</li>
</ul>
<p>定义一个数组</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">months := [...]<span class="type">string</span>&#123;<span class="number">1</span>: <span class="string">&quot;January&quot;</span>, <span class="comment">/* ... */</span>, <span class="number">12</span>: <span class="string">&quot;December&quot;</span>&#125;</span><br></pre></td></tr></table></figure>

<p><strong>切片操作</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Q2 := months[<span class="number">4</span>:<span class="number">7</span>]</span><br><span class="line">summer := months[<span class="number">6</span>:<span class="number">9</span>]</span><br><span class="line">fmt.Println(Q2)     <span class="comment">// [&quot;April&quot; &quot;May&quot; &quot;June&quot;]</span></span><br><span class="line">fmt.Println(summer) <span class="comment">// [&quot;June&quot; &quot;July&quot; &quot;August&quot;]</span></span><br></pre></td></tr></table></figure>

<ul>
<li>slice的切片操作s[i:j]，其中0 ≤ i≤ j≤ cap(s)，用于创建一个新的slice，引用s的从第i个元素开始到第j-1个元素的子序列。</li>
<li>如果i位置的索引被省略的话将使用0代替，如果j位置的索引被省略的话将使用len(s)代替。<ul>
<li>months[1:13]切片操作将引用全部有效的月份，和months[1:]操作等价；</li>
<li>months[:]切片操作则是引用整个数组。</li>
</ul>
</li>
</ul>
<p><strong>如果切片操作超出cap(s)的上限将导致一个panic异常</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fmt.Println(summer[:<span class="number">20</span>]) <span class="comment">// panic: out of range</span></span><br></pre></td></tr></table></figure>

<p><strong>但是超出len(s)则是意味着扩展了slice，因为新slice的长度会变大</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">endlessSummer := summer[:<span class="number">5</span>] <span class="comment">// extend a slice (within capacity)</span></span><br><span class="line">fmt.Println(endlessSummer)  <span class="comment">// &quot;[June July August September October]&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>因为slice值包含指向第一个slice元素的指针，因此向函数传递slice将允许在函数内部修改底层数组的元素。</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reverse</span><span class="params">(s []<span class="type">int</span>)</span></span> &#123;</span><br><span class="line">    <span class="keyword">for</span> i, j := <span class="number">0</span>, <span class="built_in">len</span>(s)<span class="number">-1</span>; i &lt; j; i, j = i+<span class="number">1</span>, j<span class="number">-1</span> &#123;</span><br><span class="line">        s[i], s[j] = s[j], s[i]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">a := [...]<span class="type">int</span>&#123;<span class="number">0</span>, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>, <span class="number">4</span>, <span class="number">5</span>&#125;</span><br><span class="line">reverse(a[:])</span><br><span class="line">fmt.Println(a) <span class="comment">// &quot;[5 4 3 2 1 0]&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>slice vs 数组</strong></p>
<ul>
<li>slice和数组的字面值语法很类似，它们都是用花括弧包含一系列的初始化元素，但是对于slice并没有指明序列的长度。这会隐式地创建一个合适大小的数组，然后slice的指针指向底层的数组。</li>
<li>和数组不同的是，slice之间不能比较，因此我们不能使用&#x3D;&#x3D;操作符来判断两个slice是否含有全部相等元素。</li>
</ul>
<p><strong>内置的append函数用于向slice追加元素</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> runes []<span class="type">rune</span></span><br><span class="line"><span class="keyword">for</span> _, r := <span class="keyword">range</span> <span class="string">&quot;Hello, 世界&quot;</span> &#123;</span><br><span class="line">    runes = <span class="built_in">append</span>(runes, r)</span><br><span class="line">&#125;</span><br><span class="line">fmt.Printf(<span class="string">&quot;%q\n&quot;</span>, runes) <span class="comment">// &quot;[&#x27;H&#x27; &#x27;e&#x27; &#x27;l&#x27; &#x27;l&#x27; &#x27;o&#x27; &#x27;,&#x27; &#x27; &#x27; &#x27;世&#x27; &#x27;界&#x27;]&quot;</span></span><br></pre></td></tr></table></figure>



<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><p>在Go语言中，一个map就是一个哈希表的引用，map类型可以写为map[K]V，其中K和V分别对应key和value。</p>
<p><strong>创建Map的两种方式：</strong></p>
<ul>
<li><p>内置make函数</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ages := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>) <span class="comment">// mapping from strings to ints</span></span><br><span class="line">ages[<span class="string">&quot;alice&quot;</span>] = <span class="number">31</span></span><br><span class="line">ages[<span class="string">&quot;charlie&quot;</span>] = <span class="number">34</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>map字面值语法</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ages := <span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>&#123;</span><br><span class="line">    <span class="string">&quot;alice&quot;</span>:   <span class="number">31</span>,</span><br><span class="line">    <span class="string">&quot;charlie&quot;</span>: <span class="number">34</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
</ul>
<p><strong>访问</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ages[<span class="string">&quot;alice&quot;</span>] = <span class="number">32</span></span><br><span class="line">fmt.Println(ages[<span class="string">&quot;alice&quot;</span>]) <span class="comment">// &quot;32&quot;</span></span><br></pre></td></tr></table></figure>

<p><strong>删除</strong></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">delete</span>(ages, <span class="string">&quot;alice&quot;</span>) <span class="comment">// remove element ages[&quot;alice&quot;]</span></span><br></pre></td></tr></table></figure>

<p><strong>所有这些操作是安全的</strong>，即使这些元素不在map中也没有关系；如果一个查找失败将返回value类型对应的零值，例如，即使map中不存在“bob”下面的代码也可以正常工作，因为ages[“bob”]失败时将返回0。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ages[<span class="string">&quot;bob&quot;</span>] = ages[<span class="string">&quot;bob&quot;</span>] + <span class="number">1</span> <span class="comment">// happy birthday!</span></span><br></pre></td></tr></table></figure>

<p>但是map中的元素并不是一个变量，因此我们<strong>不能对map的元素进行取址操作</strong>。禁止对map元素取址的原因是map可能随着元素数量的增长而重新分配更大的内存空间，从而可能导致之前的地址无效。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">_ = &amp;ages[<span class="string">&quot;bob&quot;</span>] <span class="comment">// compile error: cannot take address of map element</span></span><br></pre></td></tr></table></figure>

<p>要想<strong>遍历map中全部的key&#x2F;value对</strong>的话，可以使用range风格的for循环实现，和之前的slice遍历语法类似。下面的迭代语句将在每次迭代时设置name和age变量，它们对应下一个键&#x2F;值对：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> name, age := <span class="keyword">range</span> ages &#123;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%s\t%d\n&quot;</span>, name, age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="结构体"><a href="#结构体" class="headerlink" title="结构体"></a>结构体</h2><p>结构体是一种聚合的数据类型，是由零个或多个任意类型的值聚合成的实体。每个值称为结构体的成员。</p>
<p>下面两个语句声明了一个叫Employee的命名的结构体类型，并且声明了一个Employee类型的变量dilbert：</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Employee <span class="keyword">struct</span> &#123;</span><br><span class="line">    ID        <span class="type">int</span></span><br><span class="line">    Name      <span class="type">string</span></span><br><span class="line">    Address   <span class="type">string</span></span><br><span class="line">    DoB       time.Time</span><br><span class="line">    Position  <span class="type">string</span></span><br><span class="line">    Salary    <span class="type">int</span></span><br><span class="line">    ManagerID <span class="type">int</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dilbert Employee</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/29/go%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/10/29/go%E7%9A%84%E7%A8%8B%E5%BA%8F%E7%BB%93%E6%9E%84/" class="post-title-link" itemprop="url">go的程序结构</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-10-29 17:06:13" itemprop="dateCreated datePublished" datetime="2021-10-29T17:06:13+08:00">2021-10-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:46:53" itemprop="dateModified" datetime="2023-05-07T17:46:53+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="go程序结构"><a href="#go程序结构" class="headerlink" title="go程序结构"></a>go程序结构</h2><ul>
<li>一个Go语言编写的程序对应一个或多个以.go为文件后缀名的源文件</li>
<li>每个源文件中以包的声明语句开始，说明该源文件是属于哪个包</li>
<li>包声明语句之后是import语句导入依赖的其它包</li>
<li>然后是包一级的类型、变量、常量、函数的声明语句，包一级声明语句声明的名字可在整个包对应的每个源文件中访问</li>
<li>最后是各个局部声明，局部声明的名字就只能在函数内部很小的范围被访问。</li>
</ul>
<h2 id="声明"><a href="#声明" class="headerlink" title="声明"></a>声明</h2><p>Go语言主要有四种类型的声明语句：</p>
<ul>
<li>var：变量</li>
<li>const：常量</li>
<li>type：类型</li>
<li>func：函数实体</li>
</ul>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 包一级声明</span></span><br><span class="line"><span class="keyword">const</span> boilingF = <span class="number">212.0</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 局部声明</span></span><br><span class="line">    <span class="keyword">var</span> f = boilingF</span><br><span class="line">    <span class="keyword">var</span> c = (f - <span class="number">32</span>) * <span class="number">5</span> / <span class="number">9</span></span><br><span class="line">    fmt.Printf(<span class="string">&quot;boiling point = %g°F or %g°C\n&quot;</span>, f, c)</span><br><span class="line">    <span class="comment">// Output:</span></span><br><span class="line">    <span class="comment">// boiling point = 212°F or 100°C</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h2><p>var声明语句可以创建一个特定类型的变量，然后给变量附加一个名字，并且设置变量的初始值。变量声明的一般语法如下：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var 变量名字 类型 = 表达式</span><br></pre></td></tr></table></figure>

<p>其中“<em>类型</em>”或“*&#x3D; 表达式*”两个部分可以省略其中的一个。</p>
<ul>
<li>如果省略的是类型信息，那么将根据初始化表达式来推导变量的类型信息。</li>
<li>如果初始化表达式被省略，那么将用零值初始化该变量。 <ul>
<li>数值类型变量对应的零值是0</li>
<li>布尔类型变量对应的零值是false</li>
<li>字符串类型对应的零值是空字符串</li>
<li>接口或引用类型（包括slice、指针、map、chan和函数）变量对应的零值是nil</li>
<li>数组或结构体等聚合类型对应的零值是每个元素或字段都是对应该类型的零值。</li>
</ul>
</li>
</ul>
<h5 id="1-简短变量声明"><a href="#1-简短变量声明" class="headerlink" title="1. 简短变量声明"></a>1. 简短变量声明</h5><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">anim := gif.GIF&#123;LoopCount: nframes&#125;</span><br><span class="line">freq := rand.Float64() * <span class="number">3.0</span></span><br><span class="line">t := <span class="number">0.0</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 同时声明多个变量</span></span><br><span class="line">i, j := <span class="number">0</span>, <span class="number">1</span></span><br></pre></td></tr></table></figure>
<ul>
<li>简短变量声明左边的变量可能并不是全部都是刚刚声明的。如果有一些已经在相同的词法域声明过了，那么简短变量声明语句对这些已经声明过的变量就只有赋值行为了。</li>
<li>简短变量声明语句中必须至少要声明一个新的变量，否则编译无法通过</li>
</ul>
<h5 id="2-指针"><a href="#2-指针" class="headerlink" title="2. 指针"></a>2. 指针</h5><p>一个指针的值是另一个变量的地址。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">x := <span class="number">1</span></span><br><span class="line">p := &amp;x         <span class="comment">// &amp;x 取x的内存地址</span></span><br><span class="line">fmt.Println(*p) <span class="comment">// &quot;1&quot;</span></span><br><span class="line">*p = <span class="number">2</span>          <span class="comment">// *p p指针指向的变量的值</span></span><br><span class="line">fmt.Println(x)  <span class="comment">// &quot;2&quot;</span></span><br></pre></td></tr></table></figure>

<h5 id="3-new-函数"><a href="#3-new-函数" class="headerlink" title="3. new 函数"></a>3. new 函数</h5><p>另一个创建变量的方法是调用内建的new函数。表达式new(T)将创建一个T类型的匿名变量，初始化为T类型的零值，然后返回变量地址，返回的指针类型为<code>*T</code>。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">p := <span class="built_in">new</span>(<span class="type">int</span>)   <span class="comment">// p, *int 类型, 指向匿名的 int 变量</span></span><br><span class="line">fmt.Println(*p) <span class="comment">// &quot;0&quot;</span></span><br><span class="line">*p = <span class="number">2</span>          <span class="comment">// 设置 int 匿名变量的值为 2</span></span><br><span class="line">fmt.Println(*p) <span class="comment">// &quot;2&quot;</span></span><br></pre></td></tr></table></figure>

<p>new函数类似是一种语法糖，用new创建变量和普通变量声明语句方式创建变量没有什么区别</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newInt</span><span class="params">()</span></span> *<span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">new</span>(<span class="type">int</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">newInt</span><span class="params">()</span></span> *<span class="type">int</span> &#123;</span><br><span class="line">    <span class="keyword">var</span> dummy <span class="type">int</span></span><br><span class="line">    <span class="keyword">return</span> &amp;dummy</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上面了解了变量的声明，下面继续学习<strong>变量的生命周期</strong></p>
<ul>
<li>对于在包一级声明的变量来说，它们的生命周期和整个程序的运行周期是一致的。</li>
<li>而相比之下，局部变量的生命周期则是动态的：每次从创建一个新变量的声明语句开始，直到该变量不再被引用为止，然后变量的存储空间可能被回收。函数的参数变量和返回值变量都是局部变量</li>
</ul>
<h2 id="赋值"><a href="#赋值" class="headerlink" title="赋值"></a>赋值</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">x = <span class="number">1</span>                       <span class="comment">// 命名变量的赋值</span></span><br><span class="line">*p = <span class="literal">true</span>                   <span class="comment">// 通过指针间接赋值</span></span><br><span class="line">person.name = <span class="string">&quot;bob&quot;</span>         <span class="comment">// 结构体字段赋值</span></span><br><span class="line">count[x] = count[x] * scale <span class="comment">// 数组、slice或map的元素赋值</span></span><br></pre></td></tr></table></figure>

<p><strong>元组赋值：</strong> 元组赋值是另一种形式的赋值语句，它允许同时更新多个变量的值。在赋值之前，赋值语句右边的所有表达式将会先进行求值，然后再统一更新左边对应变量的值。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">x, y = y, x</span><br><span class="line"></span><br><span class="line">a[i], a[j] = a[j], a[i]</span><br></pre></td></tr></table></figure>

<p><strong>可赋值性：</strong> 赋值语句是显式的赋值形式，但是程序中还有很多地方会发生隐式的赋值行为。</p>
<ul>
<li>函数调用会隐式地将调用参数的值赋值给函数的参数变量</li>
<li>一个返回语句会隐式地将返回操作的值赋值给结果变量</li>
<li>一个复合类型的字面量也会产生赋值行为。</li>
</ul>
<h2 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h2><p>一个类型声明语句创建了一个新的类型名称，和现有类型具有相同的底层结构。新命名的类型提供了一个方法，用来分隔不同概念的类型，这样即使它们底层类型相同也是不兼容的。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">type 类型名字 底层类型</span><br></pre></td></tr></table></figure>

<p>类型声明语句一般出现在包一级，因此如果新创建的类型名字的首字符大写，则在包外部也可以使用。</p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> tempconv</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Celsius <span class="type">float64</span>    <span class="comment">// 摄氏温度</span></span><br><span class="line"><span class="keyword">type</span> Fahrenheit <span class="type">float64</span> <span class="comment">// 华氏温度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> (</span><br><span class="line">    AbsoluteZeroC Celsius = <span class="number">-273.15</span> <span class="comment">// 绝对零度</span></span><br><span class="line">    FreezingC     Celsius = <span class="number">0</span>       <span class="comment">// 结冰点温度</span></span><br><span class="line">    BoilingC      Celsius = <span class="number">100</span>     <span class="comment">// 沸水温度</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">CToF</span><span class="params">(c Celsius)</span></span> Fahrenheit &#123; <span class="keyword">return</span> Fahrenheit(c*<span class="number">9</span>/<span class="number">5</span> + <span class="number">32</span>) &#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">FToC</span><span class="params">(f Fahrenheit)</span></span> Celsius &#123; <span class="keyword">return</span> Celsius((f - <span class="number">32</span>) * <span class="number">5</span> / <span class="number">9</span>) &#125;</span><br></pre></td></tr></table></figure>

<p>对于每一个类型T，都有一个对应的类型转换操作T(x)，用于将x转为T类型（译注：如果T是指针类型，可能会需要用小括弧包装T，比如<code>(*int)(0)</code>）。</p>
<ul>
<li>只有当两个类型的底层基础类型相同时，才允许这种转型操作</li>
<li>或者是两者都是指向相同底层结构的指针类型，这些转换只改变类型而不会影响值本身。</li>
<li>如果x是可以赋值给T类型的值，那么x必然也可以被转为T类型，但是一般没有这个必要。</li>
</ul>
<h2 id="包和文件"><a href="#包和文件" class="headerlink" title="包和文件"></a>包和文件</h2><p>Go语言中的包和其他语言的库或模块的概念类似，目的都是为了支持模块化、封装、单独编译和代码重用。一个包的源代码保存在一个或多个以.go为文件后缀名的源文件中，通常一个包所在目录路径的后缀是包的导入路径；</p>
<ul>
<li><p>每个包都对应一个独立的名字空间。</p>
<p> 在image包中的Decode函数和在unicode&#x2F;utf16包中的 Decode函数是不同的。要在外部引用该函数，必须显式使用image.Decode或utf16.Decode形式访问。</p>
</li>
<li><p>包还可以让我们通过控制哪些名字是外部可见的来隐藏内部实现信息。</p>
<p>  在Go语言中，一个简单的规则是：如果一个名字是大写字母开头的，那么该名字是导出的</p>
</li>
</ul>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/10/29/go%E5%BC%80%E7%AF%87/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="wk">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="wk的博客">
      <meta itemprop="description" content="一个前端程序员">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="undefined | wk的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2021/10/29/go%E5%BC%80%E7%AF%87/" class="post-title-link" itemprop="url">go开篇</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2021-10-29 17:05:50" itemprop="dateCreated datePublished" datetime="2021-10-29T17:05:50+08:00">2021-10-29</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar-check"></i>
      </span>
      <span class="post-meta-item-text">Edited on</span>
      <time title="Modified: 2023-05-07 17:47:14" itemprop="dateModified" datetime="2023-05-07T17:47:14+08:00">2023-05-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/" itemprop="url" rel="index"><span itemprop="name">后端</span></a>
        </span>
          , 
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%90%8E%E7%AB%AF/go/" itemprop="url" rel="index"><span itemprop="name">go</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h2 id="Golang的学习方向"><a href="#Golang的学习方向" class="headerlink" title="Golang的学习方向"></a>Golang的学习方向</h2><ul>
<li>区块链研发工程师</li>
<li>Go服务端工程师</li>
<li>Go游戏软件工程师</li>
<li>Golang分布式&#x2F;云计算软件工程师</li>
</ul>
<h2 id="Go开发环境准备"><a href="#Go开发环境准备" class="headerlink" title="Go开发环境准备"></a>Go开发环境准备</h2><blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zsy/p/5215336.html">GO语言下载、安装、配置</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zsy/p/5223957.html">在Visual Studio Code中配置GO开发环境</a></p>
</blockquote>
<h2 id="Hello-World"><a href="#Hello-World" class="headerlink" title="Hello World"></a>Hello World</h2><p>传世经典<code>Hello World</code></p>
<figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> <span class="string">&quot;fmt&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(<span class="string">&quot;hello world&quot;</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="字符串"><a href="#字符串" class="headerlink" title="字符串"></a>字符串</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">	<span class="string">&quot;strings&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	fmt.Println(os.Args[<span class="number">0</span>])</span><br><span class="line"></span><br><span class="line">	<span class="keyword">var</span> s, sep <span class="type">string</span></span><br><span class="line">	<span class="keyword">for</span> i:=<span class="number">1</span>; i &lt; <span class="built_in">len</span>(os.Args); i++ &#123;</span><br><span class="line">		s += sep + os.Args[i]</span><br><span class="line">		sep = <span class="string">&quot; &quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(s)</span><br><span class="line"></span><br><span class="line">	s = <span class="string">&quot;&quot;</span></span><br><span class="line">	sep =  <span class="string">&quot;&quot;</span></span><br><span class="line">	<span class="keyword">for</span> _, arg := <span class="keyword">range</span> os.Args[<span class="number">1</span>:] &#123;</span><br><span class="line">		s += sep + arg</span><br><span class="line">		sep = <span class="string">&quot; &quot;</span></span><br><span class="line">	&#125;</span><br><span class="line">	fmt.Println(s)</span><br><span class="line"></span><br><span class="line">	fmt.Println(strings.Join(os.Args[<span class="number">1</span>:], <span class="string">&quot; &quot;</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="输入输出流"><a href="#输入输出流" class="headerlink" title="输入输出流"></a>输入输出流</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;bufio&quot;</span></span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	counts := <span class="built_in">make</span>(<span class="keyword">map</span>[<span class="type">string</span>]<span class="type">int</span>)</span><br><span class="line">	input := bufio.NewScanner(os.Stdin)</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> input.Scan() &#123;</span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s\n&quot;</span>, input.Text())</span><br><span class="line">		counts[input.Text()]++</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="keyword">for</span> line, n := <span class="keyword">range</span> counts &#123;</span><br><span class="line">			fmt.Printf(<span class="string">&quot;%d %s\n&quot;</span>, n, line)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="网络编程"><a href="#网络编程" class="headerlink" title="网络编程"></a>网络编程</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;os&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	<span class="keyword">for</span> _, url := <span class="keyword">range</span> os.Args[<span class="number">1</span>:] &#123;</span><br><span class="line">		resp, err := http.Get(url)</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> url != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Fprintf(os.Stderr, <span class="string">&quot;fetch: %v\n&quot;</span>, err)</span><br><span class="line">			os.Exit(<span class="number">1</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		b, err := ioutil.ReadAll(resp.Body)</span><br><span class="line">		resp.Body.Close()</span><br><span class="line"></span><br><span class="line">		<span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">			fmt.Fprintf(os.Stderr, <span class="string">&quot;fetch: reading %s: %v\n&quot;</span>, url, err)</span><br><span class="line">			os.Exit(<span class="number">1</span>)</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">		fmt.Printf(<span class="string">&quot;%s&quot;</span>, b)</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="并发编程"><a href="#并发编程" class="headerlink" title="并发编程"></a>并发编程</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Fetchall fetches URLs in parallel and reports their times and sizes.</span></span><br><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">    <span class="string">&quot;fmt&quot;</span></span><br><span class="line">    <span class="string">&quot;io&quot;</span></span><br><span class="line">    <span class="string">&quot;io/ioutil&quot;</span></span><br><span class="line">    <span class="string">&quot;net/http&quot;</span></span><br><span class="line">    <span class="string">&quot;os&quot;</span></span><br><span class="line">    <span class="string">&quot;time&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">    start := time.Now()</span><br><span class="line">    ch := <span class="built_in">make</span>(<span class="keyword">chan</span> <span class="type">string</span>)</span><br><span class="line">    <span class="keyword">for</span> _, url := <span class="keyword">range</span> os.Args[<span class="number">1</span>:] &#123;</span><br><span class="line">        <span class="keyword">go</span> fetch(url, ch) <span class="comment">// start a goroutine</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> <span class="keyword">range</span> os.Args[<span class="number">1</span>:] &#123;</span><br><span class="line">        fmt.Println(&lt;-ch) <span class="comment">// receive from channel ch</span></span><br><span class="line">    &#125;</span><br><span class="line">    fmt.Printf(<span class="string">&quot;%.2fs elapsed\n&quot;</span>, time.Since(start).Seconds())</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">fetch</span><span class="params">(url <span class="type">string</span>, ch <span class="keyword">chan</span>&lt;- <span class="type">string</span>)</span></span> &#123;</span><br><span class="line">    start := time.Now()</span><br><span class="line">    resp, err := http.Get(url)</span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        ch &lt;- fmt.Sprint(err) <span class="comment">// send to channel ch</span></span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    nbytes, err := io.Copy(ioutil.Discard, resp.Body)</span><br><span class="line">    resp.Body.Close() <span class="comment">// don&#x27;t leak resources</span></span><br><span class="line">    <span class="keyword">if</span> err != <span class="literal">nil</span> &#123;</span><br><span class="line">        ch &lt;- fmt.Sprintf(<span class="string">&quot;while reading %s: %v&quot;</span>, url, err)</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    secs := time.Since(start).Seconds()</span><br><span class="line">    ch &lt;- fmt.Sprintf(<span class="string">&quot;%.2fs  %7d  %s&quot;</span>, secs, nbytes, url)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="Web服务"><a href="#Web服务" class="headerlink" title="Web服务"></a>Web服务</h2><figure class="highlight go"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> main</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> (</span><br><span class="line">	<span class="string">&quot;fmt&quot;</span></span><br><span class="line">	<span class="string">&quot;log&quot;</span></span><br><span class="line">	<span class="string">&quot;net/http&quot;</span></span><br><span class="line">	<span class="string">&quot;sync&quot;</span></span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> mu sync.Mutex</span><br><span class="line"><span class="keyword">var</span> count <span class="type">int</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">main</span><span class="params">()</span></span> &#123;</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/&quot;</span>, handler)</span><br><span class="line">	http.HandleFunc(<span class="string">&quot;/count&quot;</span>, counter)</span><br><span class="line">	log.Fatal(http.ListenAndServe(<span class="string">&quot;localhost:8000&quot;</span>, <span class="literal">nil</span>))</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// handler echoes the Path component of the requested URL.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">handler</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	mu.Lock()</span><br><span class="line">	count++</span><br><span class="line">	mu.Unlock()</span><br><span class="line">	fmt.Fprintf(w, <span class="string">&quot;URL.Path = %q\n&quot;</span>, r.URL.Path)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// counter echoes the number of calls so far.</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">counter</span><span class="params">(w http.ResponseWriter, r *http.Request)</span></span> &#123;</span><br><span class="line">	mu.Lock()</span><br><span class="line">	fmt.Fprintf(w, <span class="string">&quot;Count %d\n&quot;</span>, count)</span><br><span class="line">	mu.Unlock()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" title="Previous page" aria-label="Previous page" href="/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="page-number current">2</span><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" title="Next page" aria-label="Next page" href="/page/3/"><i class="fa fa-angle-right"></i></a>
  </nav>

</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">wk</span>
</div>
  <div class="powered-by">Powered by <a href="https://hexo.io/" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.js.org/pisces/" rel="noopener" target="_blank">NexT.Pisces</a>
  </div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  





  





</body>
</html>
